window.Mpathy=function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/code/6.3.1-mp/",n(n.s=0)}([function(e,t,n){"use strict";n.r(t),n.d(t,"getIntegrationData",(function(){return s.c})),n.d(t,"version",(function(){return l})),n.d(t,"Config",(function(){return d})),n.d(t,"State",(function(){return f})),n.d(t,"Tools",(function(){return p})),n.d(t,"FrameBridge",(function(){return g})),n.d(t,"Persister",(function(){return m})),n.d(t,"Project",(function(){return h})),n.d(t,"Engine",(function(){return b})),n.d(t,"Events",(function(){return y})),n.d(t,"start",(function(){return O})),n.d(t,"initConfig",(function(){return S})),n.d(t,"initState",(function(){return v})),n.d(t,"isDebug",(function(){return w})),n.d(t,"configureProject",(function(){return k})),n.d(t,"getVid",(function(){return j})),n.d(t,"setDebug",(function(){return C})),n.d(t,"getDebugData",(function(){return E})),n.d(t,"applyConfigOverride",(function(){return T})),n.d(t,"resetConfigOveride",(function(){return N})),n.d(t,"setWebSDKVersion",(function(){return I})),n.d(t,"resetWebSDKVersion",(function(){return P})),n.d(t,"clearState",(function(){return x})),n.d(t,"selectTrackingServer",(function(){return M})),n.d(t,"showConsole",(function(){return _})),n.d(t,"trackMe",(function(){return D}));var i=n(1);function o(){let e={},t={},n=[];this.set=(i,o)=>{this.hasOwnProperty(i)||Object.defineProperty(this,i,{configurable:!0,enumerable:!0,get:()=>e[i],set:o=>{let r=e[i];e[i]=o,(t[i]||[]).forEach(e=>{e(o,r)}),n.forEach(e=>{e(this)})}}),this[i]=o},this.merge=(e={})=>{Object.entries(e).forEach(([e,t])=>this.set(e,t))},this.watch=(i,o)=>{"function"!=typeof i&&"object"!=typeof i||(o=i,i=null),"function"==typeof o&&(o={handler:o}),null===i?n.push(o.handler):(t.hasOwnProperty(i)||(t[i]=[]),t[i].push(o.handler)),o.immediate&&o.handler(null===i?this:e[i]);let r=this;return()=>r.unwatch(i,o.handler)},this.unwatch=(e,n)=>{let i=t[e].indexOf(n);~i&&t[e].splice(i,1)}}var r=n(6),a=n(2);var c=n(11),s=n(15),u=n(7);const l="6.3.1-mp",d=window._mptc||{},f=function(e={}){let t=function(){};t.prototype=new o;let n=new t;return n.merge(e),n}(),p=n(1),g=n(11),m=n(2),h=n(6),b=n(3),y=new class{constructor(){this.eventHandlers=[],this.initialDispatchedEvents={},this.initialEventHandlers=[]}dispatch(e,t={},{target:n,delay:i=null}={}){if(null===i){if(this.initialDispatchedEvents.hasOwnProperty(e)||(this.initialDispatchedEvents[e]=t,this.checkInitialEventHandlers()),this.eventHandlers.forEach(n=>{if(n.event!==e)return!1;n.once&&this.off(e,n.callback);let i=n.callback(t);void 0!==i&&(t=i)}),n){let i=document.createEvent("CustomEvent");i.initCustomEvent("mpt_"+e,!1,!1,t),n.dispatchEvent(i)}return t}setTimeout(()=>this.dispatch(e,t,{target:n}),i)}on(e,t){return this.eventHandlers.push({event:e,callback:t}),()=>this.off(e,t)}once(e,t){return this.eventHandlers.push({event:e,callback:t,once:!0}),()=>this.off(e,t)}off(e,t){let n=this.eventHandlers.findIndex(n=>n.event===e&&n.callback===t);null!==n&&this.eventHandlers.splice(n,1)}onceInitial(e,t){"string"==typeof e&&(e=[e]),this.initialEventHandlers.push({events:e,callback:t}),this.checkInitialEventHandlers()}checkInitialEventHandlers(){let e=[];this.initialEventHandlers.forEach(({events:t,callback:n},i)=>{let o={};t.every(e=>!!this.initialDispatchedEvents.hasOwnProperty(e)&&(o[e]=this.initialDispatchedEvents[e],!0))&&e.push({index:i,callback:n,combinedPayload:o})}),e.reverse().forEach(({index:e})=>this.initialEventHandlers.splice(e,1)),e.forEach(({callback:e,combinedPayload:t})=>e(t))}};function O(){!function(){window.addEventListener("error",e=>{if(/\/\/[^/]+(foresee|answerscloud)\.com/.test(e.filename)){if(!(f.trackedErrors>=d.maxTrackedErrors))return f.trackedErrors++,Object(i.sendStatsRequest)({type:"error",msg:e.message,line:e.lineno+":"+e.colno,script_url:e.filename}),!1;Object(i.notify)("failed to relay JS Error, max allowed count of error requests reached.")}});let e=!1;window.addEventListener("securitypolicyviolation",t=>{let{blockedURI:n,violatedDirective:o,columnNumber:r,lineNumber:a,sourceFile:c}=t;if(!e&&/\/\/[^/]+(foresee|answerscloud)\.com/.test(n))return Object(i.sendStatsRequest)({type:"error",msg:`Content-Security-Violation (${o}) for URI ${n}`,line:a+":"+r,script_url:c}),e=!0,!1}),y.on("after_pi",()=>f.trackedErrors=0)}(),Object(c.startFrameBridge)(),Object(a.startCookieRefreshInterval)(),S(),v(),document.readyState&&~["complete","loaded"].indexOf(document.readyState)?(f.domloadTime=Object(i.getTimestamp)()-f.loadTime,y.dispatch("dom_loaded")):window.addEventListener("load",()=>{f.domloadTime=Object(i.getTimestamp)()-f.loadTime,setTimeout(()=>y.dispatch("dom_loaded"),5)}),null===Object(a.getCookie)("module_version")?Object(i.notify)("starting WebSDK version "+l):Object(i.notify)(`starting WebSDK version ${l} (Testversion 🧪)`),f.watch("serverOffset",e=>{Object(a.setCookie)("server_offset",+e,"session"),M()}),f.consoleOpen&&window===parent&&Object(i.loadScript)(d.modulePath+"console-loader.js"),setTimeout(()=>{y.dispatch("mpathy_ready",null,{target:window}),d.autostartPrecheck&&(d.waitForDOMLoad?y.onceInitial("dom_loaded",()=>Object(r.startProject)()):Object(r.startProject)())},5)}function S(){Object(i.mergeDefaults)(d,{trackingServerHost:null,asyncPrecheck:!1,trackingCookieLifetime:"30d",maxTrackedErrors:10,idsite:null,uploadTime:null,devices:[],domain:".*",trackingRate:0,trackingServers:[],useSamplingRates:!0,setup:{},cookieDomain:null,stopOnTranslation:!0,autostartPrecheck:!0,autostartTracking:!0,recordKeyEvents:!0,maskFullPage:!0,maskAllInputs:!0,piCheckActiveElement:!0,propertyYesValue:"yes",propertyNoValue:"no",bufferRecording:"rolling",bufferRecordingLimit:6,bufferRecordingCompression:!0,bufferCompressionFirstPi:!1,compressionSizeMin:5e4,compressionSizeMax:7e5,teoLoggingSampleRate:.5,opinionlabIntegration:!0,foreseeIntegration:!0,waitForDOMLoad:!0,maskUrl:"",trackHover:null,maxSnapshotDuration:1e3,maxMutationDuration:1e3});let e=d.setup.config||{};void 0===e.maskAllInputs&&(e.maskAllInputs=!1),Object.assign(d,e),null!=Object(a.getCookie)("config_override")&&Object.assign(d,JSON.parse(Object(a.getCookie)("config_override")))}function v(){let e=Object(a.getCookie)("recording_to_buffer_"+d.idsite);f.merge({debug:!!+Object(a.getCookie)("debug",0),consoleOpen:!!+Object(a.getCookie)("console",0),loadTime:Object(i.getTimestamp)(),trackedErrors:0,serverOffset:+Object(a.getCookie)("server_offset",0),recordingToBuffer:null===e?e:!!+e,conditionalImport:!!+Object(a.getCookie)("conditional_import_"+d.idsite,0),pagenames:[],rates:[],scopes:[],rateComparator:0,precheckStatus:"pending",rejectMessage:null,pagename:null,propertiesHash:null,isUnmappedPagename:!1,trackingStatus:"initial",socketStatus:"initial",nativeCompressionSupported:!1,previousPID:null,currentPID:null,domloadTime:null,piStartTime:0,initialReferer:Object(a.rememberCookie)("initial_referer","session",()=>document.referrer||null),matchingScopesConfig:null,teoLoggingEnabled:!1})}function w(){return f.debug||f.consoleOpen}function k(e){d.customcode=e}function j(){return Object(a.rememberCookie)("vid","730d",()=>String(Object(i.getTimestamp)())+String(Math.floor(9e4*Math.random())+1e4))}function C(e=!0){return Object(a.setCookie)("debug",+e,"session"),console.log("[m-pathy] 🦄 %cStarting debug mode after reload...","color: green"),setTimeout(()=>location.reload(),500),window.Mpathy}function E(){let e={SID:d.idsite,PID:f.currentPID,VID:j(),siteKey:d.siteKey,container:d.container,v:l,upload:d.uploadTime,url:location.href,pn:f.pagename,time:(new Date).toJSON()+" GMT",hoover:d.trackingServerHost,replay:Object(s.b)()};return"function"==typeof window.copy&&(window.copy(JSON.stringify(e,null,2)),console.log("[m-pathy] %cCopied debug data to clipboard 📋","color: green")),e}function T(e){if("object"==typeof e&&0!==Object.keys(e).length)return Object(a.setCookie)("config_override",JSON.stringify(e),"session"),setTimeout(()=>location.reload(),500),window.Mpathy;Object(i.notify)("error","Invalid first argument: Expected Object")}function N(){return Object(a.removeCookie)("config_override"),setTimeout(()=>location.reload(),500),window.Mpathy}function I(e=null,t=null){return null!==e&&Object(a.setCookie)("module_version",e,"session"),null!==t&&Object(a.setCookie)("module_host",t,"session"),console.log("[m-pathy] 🧪 %cLoading test version after reload...","color: green"),setTimeout(()=>location.reload(),500),window.Mpathy}function P(){return Object(a.removeCookie)("module_version"),Object(a.removeCookie)("module_host"),console.log("[m-pathy] 🧪 %reset test version after reload...","color: green"),setTimeout(()=>location.reload(),500),window.Mpathy}function x(){return f.teoLoggingEnabled=!1,b.stopTracking(!0),Object(u.a)(),Object(a.resetCookies)(),Object.keys(localStorage).filter(e=>e.startsWith("mpt_")).forEach(e=>localStorage.removeItem(e)),console.log("[m-pathy] 🧪 %cReloading m-pathy with cleared state...","color: green"),setTimeout(()=>location.reload(),500),window.Mpathy}function M(){if(!d.idsite)return;let e=d.trackingServers,t=(j().slice(-5)+f.serverOffset)%e.length;d.trackingServerHost=e[t]}function _(e=!0){return Object(a.setCookie)("console",+e,"session"),console.log("[m-pathy] ⏳ %cStarting m-pathy console after reload...","color: blue"),setTimeout(()=>location.reload(),500),window.Mpathy}function D(e=!0){return h.setTrackingActiveCookie(e),e&&Object(a.removeCookie)("tracking_stopped_"+d.idsite),console.log("[m-pathy] ⏳ %cStarting tracking after reload...","color: blue"),setTimeout(()=>location.reload(),500),window.Mpathy}},function(e,t,n){"use strict";n.r(t),n.d(t,"notify",(function(){return r})),n.d(t,"loadScript",(function(){return a})),n.d(t,"resolvePath",(function(){return c})),n.d(t,"mergeDefaults",(function(){return s})),n.d(t,"sendRequest",(function(){return u})),n.d(t,"sendStatsRequest",(function(){return l})),n.d(t,"generateQueryString",(function(){return d})),n.d(t,"getVersionsString",(function(){return f})),n.d(t,"getDeviceType",(function(){return p})),n.d(t,"isMobile",(function(){return g})),n.d(t,"arrayUniq",(function(){return m})),n.d(t,"resolveNodes",(function(){return h})),n.d(t,"isVisible",(function(){return b})),n.d(t,"throttle",(function(){return y})),n.d(t,"debounce",(function(){return O})),n.d(t,"getScrollingElement",(function(){return S})),n.d(t,"scrambleString",(function(){return v})),n.d(t,"anonymizeString",(function(){return w})),n.d(t,"getScrollTop",(function(){return j})),n.d(t,"getScrollLeft",(function(){return C})),n.d(t,"getOrientation",(function(){return E})),n.d(t,"isScrollingDisabled",(function(){return T})),n.d(t,"getClientWidth",(function(){return N})),n.d(t,"getClientHeight",(function(){return I})),n.d(t,"isTouchDevice",(function(){return P})),n.d(t,"matchSelector",(function(){return x})),n.d(t,"loopNodeTree",(function(){return M})),n.d(t,"findParent",(function(){return _})),n.d(t,"getMatchingParent",(function(){return D})),n.d(t,"getNodeDimensions",(function(){return A})),n.d(t,"getElementXPath",(function(){return R})),n.d(t,"matchString",(function(){return L})),n.d(t,"onNodeInserted",(function(){return H})),n.d(t,"getBlobSize",(function(){return X})),n.d(t,"checkRateByVid",(function(){return V})),n.d(t,"getTimestamp",(function(){return F})),n.d(t,"getNodeHref",(function(){return U}));var i=n(0);const o={a:8.12,b:9.61,c:12.32,d:16.64,e:28.66,f:30.96,g:32.99,h:38.91,i:46.23,j:46.33,k:47.02,l:51,m:53.61,n:60.56,o:68.24,p:70.06,q:70.17,r:76.19,s:82.47,t:91.57,u:94.45,v:95.56,w:97.65,x:97.82,y:99.93,z:100};function r(...e){if(!i.State.debug)return;let t="log";e.length>1&&["error","warn","info","log","debug","table"].includes(e[0])&&(t=e[0],e.splice(0,1)),"string"==typeof e[0]&&(e[0]="[m-pathy] "+e[0],parent!=window&&(e[0]="[iframe] "+e[0])),"object"==typeof window.console&&"function"==typeof window.console[t]&&window.console[t](...e)}function a(e,t){let n=document.createElement("script");n.setAttribute("src",c(e)),n.setAttribute("async",!0),n.setAttribute("type","text/javascript"),n.setAttribute("charset","utf-8"),n.setAttribute("crossorigin","anonymous"),t instanceof Function&&n.addEventListener("load",t),document.head.appendChild(n)}function c(e){return e.replace(/%CDN_HOST%/g,i.Config.cdnHost).replace(/%TRACKING_SERVER_HOST%/g,i.Config.trackingServerHost).replace(/%VERSION%/g,i.Config.requiredSDKVersion).replace(/%IDSITE%/g,i.Config.idsite).replace(/%CONTAINER%/,i.Config.container).replace(/%SITE_KEY%/,i.Config.siteKey)}function s(e,t){return Object.keys(t).forEach(n=>{e.hasOwnProperty(n)||(e[n]=t[n])}),e}function u(e,t={}){if(null===i.Config.trackingServerHost)return void r("warn","Request could not be send. No trackingServerHost has been set yet.");let n=new XMLHttpRequest,o=i.State.serverOffset;t={method:"POST",query:{},data:{},retry:0,maxRetries:5,onSuccess:null,onError:null,isJson:!1,...t},n.onreadystatechange=()=>{4===n.readyState&&200===n.status&&(t.retry=0,"function"==typeof t.onSuccess&&t.onSuccess(n.responseText,n.status))},n.onerror=()=>{t.retry>=t.maxRetries?"function"==typeof t.onError&&t.onError(n.status):(o===i.State.serverOffset&&i.State.serverOffset++,setTimeout(()=>{t.retry++,u(e,t)},1e3))},t.isJson&&(n.setRequestHeader("Content-Type","application/json; charset=utf-8"),t.data=JSON.stringify(t.data)),e=c(e),Object.keys(t.query).length>0&&(e+=d(t.query));try{n.open(t.method.toUpperCase(),e,!0),n.send(t.data)}catch(e){r("warn","Failed to send PostRequest")}}function l(e={}){u("//%TRACKING_SERVER_HOST%/ps",{method:"GET",query:{idsite:i.Config.idsite,pid:i.State.currentPID||42,vid:Object(i.getVid)(),pn:i.State.pagename,url:location.href,user_agent:window.navigator.userAgent,versions:f(),...e}})}function d(e){return"?"+Object.entries(e).map(([e,t])=>e+"="+encodeURIComponent(t)).join("&")}function f(){let e="SDK: "+i.Config.requiredSDKVersion;return i.Config.uploadTime&&(e+=" | UP: "+i.Config.uploadTime),e}function p(){return/((i|view|touch)pad|lenovo|tablet(?! pc)|bolt|xoom|playbook|kindle|gt-p|sch-i|sch-t|mz609|mz617|mid7015|tf101|g-v|ct1002|transformer|silk|tab|nexus (7|\d{2}))\b/i.test(navigator.userAgent)||/android/i.test(navigator.userAgent)&&!/mobile/i.test(navigator.userAgent)?"tablet":/(up.browser|up.link|mmp|symbian|smartphone|midp|wap|webos|galaxy|phone|pocket|psp|treo|android|mobile|240x320|400X240|nitro|nokia|portalmmm|proxinet|blackberry|palm|series40|series60|s60|sonyericsson|e10i|samsung|nexus|htc|desire|ipod|itunes|vodafone|wap-|wapi|wapa|wapp)/i.test(navigator.userAgent)?"phone":"desktop"}function g(){return"desktop"!==p()}function m(e){return e.filter((t,n)=>e.indexOf(t)===n)}function h(e,t={}){let n,i=document,{single:o,includeContextNode:a}=t;if(e instanceof Function&&(e=e()),e instanceof NodeList)n=e;else if(e instanceof Node||e instanceof Document||e instanceof Window)n=[e];else{Array.isArray(e)&&(i=e[0],e=e[1],i instanceof Function&&(i=i()));try{n=i.querySelectorAll(e),a&&x(i,e)&&(n=[i,...n])}catch(t){return r("warn","Invalid CSS Selector in resolveNodes function: ",e),[]}}return o?n[0]:Array.from(n)}function b(e){return h(e).some(e=>!!e&&(!(!e.offsetWidth&&!e.offsetHeight)||"function"==typeof e.getClientRects&&e.getClientRects().length>0))}function y(e,t){let n=!1;return(...i)=>{n||(e(...i),n=!0,setTimeout(()=>n=!1,t))}}function O(e,t){let n;return(...i)=>{clearTimeout(n),n=setTimeout(()=>{e(...i)},t)}}function S(){return document.scrollingElement||document.body.parentNode||document.body||document.documentElement}function v(e){let t="";for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i>=55296&&i<=56319&&(i=e.charCodeAt(n+1),i>=56320&&i<=57343)){t+=e.slice(n,n+2),n++;continue}let r=e[n];if(/\d/.test(r)&&(r="0"),/[a-zA-Z\u00C0-\u1FFF\u2800-\uFFFD]/.test(r)){let e=100*Math.random();for(let t in o)if(e<=o[t]){r=r.toUpperCase()===r?t.toUpperCase():t;break}}t+=r}return t}function w(e,t=null){return t instanceof RegExp?e.replace(t,(e,...t)=>{let n=t.slice(0,-2);return 0===n.length?w(e):(n.forEach(t=>{e=e.replace(new RegExp(t,"g"),w(t))}),e)}):String(e).replace(/([\s\S]*?)(&#?\w+;|$)/g,(e,t,n)=>(t=t.split("").map(k).join(""))+n)}function k(e){return/\s/.test(e)?e:/\u00E4|\u00F6|\u00FC|\u00DF/.test(e)?"u":/\u00C4|\u00D6|\u00DC/.test(e)?"U":/[a-z]|[\u0080-\uFFFF]/.test(e)?"x":/[A-Z]/.test(e)?"X":/\d/.test(e)?"0":e}function j(){let e=S().scrollHeight-window.innerHeight;return Math.max(0,Math.min(S().scrollTop,e))}function C(){let e=S().scrollWidth-window.innerWidth;return Math.max(0,Math.min(S().scrollLeft,e))}function E(){return screen.orientation?screen.orientation.angle:window.orientation||0}function T(){let e=!1;try{e=window.frameElement&&window.frameElement.scrolling&&"no"===window.frameElement.scrolling}catch(e){}return e}function N(){return("BackCompat"===document.compatMode?document.body:document.documentElement).clientWidth}function I(){return("BackCompat"===document.compatMode?document.body:document.documentElement).clientHeight}function P(){return"ontouchstart"in document}function x(e,t,n=!1){let i=e.matches||e.msMatchesSelector||e.webkitMatchesSelector;return!!i&&(i=i.bind(e),n?!!+t.split(/, */).some(e=>i(e)||i(e+" *")):i(t))}function M(e,t){for(;e;){if(!1===t(e))return;e=e.parentNode}}function _(e,t){for(;e.parentNode;){if(t(e.parentNode))return e.parentNode;e=e.parentNode}return null}function D(e,t){return _(e,e=>x(e,t))}function A(e){e.correspondingUseElement&&(e=e.correspondingUseElement);let t={};if(e.getBoundingClientRect){let n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,t.top=n.top,t.left=n.left}return t.width||(t.width=e.offsetWidth),t.height||(t.height=e.offsetHeight),t.top||(t.top=e.offsetTop),t.left||(t.left=e.offsetLeft),t}function R(e){if(e===document.body||e===document.documentElement)return"//"+e.tagName;let t=e.hasOwnProperty("mptOldParentNode")?e.mptOldParentNode:e.parentNode;if(!t)return"//"+e.tagName+Array.from(e.attributes||[]).map(e=>`[@${e.name}="${e.value}"]`);let n=R(t),i="http://www.w3.org/2000/svg"===e.namespaceURI?'*[name()="'+e.tagName+'"]':e.tagName;if(t.childNodes.length>0){let t=1,o=e.previousElementSibling;for(;o;)o.tagName===e.tagName&&t++,o=o.previousElementSibling;return`${n}/${i}[${t}]`}return 0===t.childNodes.length&&t.correspondingUseElement?(t=t.correspondingUseElement,R(t)):e.hasOwnProperty("mptClickableChild")?`${n}/${i}[${e.mptClickableChild.index}]`:`${n}/${i}`}function L(e,t){if(e instanceof Function){let n=e(t);if("boolean"==typeof n)return n;e=n}return"string"==typeof e?e===t:e instanceof RegExp?e.test(t):!!Array.isArray(e)&&e.some(e=>L(e,t))}function H(e,t,n,i=!1){let o=h(e);if(!o.length)return void r("debug",`onDOMNodeInserted: ${e} not found`);let a=new MutationObserver(e=>{e.forEach(({addedNodes:e})=>{Array.from(e||[]).forEach(e=>{e.nodeType==Node.ELEMENT_NODE&&x(e,t)&&n()})})});return o.forEach(e=>{a.observe(e,{childList:!0,subtree:i})}),()=>a.disconnect()}function X(e){let t=e;return"string"==typeof e?t=[e]:navigator.userAgent.includes("Trident/")&&(t=[JSON.stringify(e)]),new Blob(t,{type:"text/plain"}).size}function V(e){return Object(i.getVid)().slice(-4)/100<=e}function F(){return+Date.now()}function U(e){let t=e.href;return"object"==typeof t&&(t=e.href.animVal||e.href.baseVal),t||""}},function(e,t,n){"use strict";n.r(t),n.d(t,"startCookieRefreshInterval",(function(){return r})),n.d(t,"getCookie",(function(){return a})),n.d(t,"setCookie",(function(){return c})),n.d(t,"removeCookie",(function(){return s})),n.d(t,"rememberCookie",(function(){return u})),n.d(t,"resetCookies",(function(){return l})),n.d(t,"refreshCookies",(function(){return f})),n.d(t,"calculateExpiry",(function(){return p}));var i=n(0),o=n(1);function r(){setInterval(f,6e4),f()}function a(e,t=null,{prefix:n=null}={}){let i=d(g(n,e));return i&&(String(i.expiry).includes("session")||i.expiry>=Object(o.getTimestamp)())?i.value:t}function c(e,t,n="30d",{prefix:r=null}={}){let a=g(r,e),c=function(){if(i.Config.cookieDomain)return i.Config.cookieDomain;let e=location.hostname.match(/(?:[^.]+\.)?\w+$/);i.Config.cookieDomain=e?e[0]:location.hostname;return i.Config.cookieDomain}();t=encodeURIComponent(t);let s=n=p(n);+s?s=Math.min(s,p("7d")):"session_timeout"===s&&(s=Object(o.getTimestamp)()+18e5);let u=`${a}=${t}|${n}`;+s&&(u+=";expires="+new Date(s).toGMTString()),u+=";path=/;domain="+c,function(){let e=navigator.userAgent;if(e.includes("CPU iPhone OS 12")||e.includes("iPad; CPU OS 12"))return!1;if(e.includes("Safari")&&e.includes("Macintosh; Intel Mac OS X 10_14")&&e.includes("Version/"))return!1;if(e.includes("Chrome/5")||e.includes("Chrome/6"))return!1;return!0}()&&(u+=";samesite=none"),u+=";secure",document.cookie=u}function s(e,{prefix:t=null}={}){c(e,0,Object(o.getTimestamp)(),{prefix:t})}function u(e,t,n,{prefix:i=null}={}){let o=a(e,null,{prefix:i});return null===o&&(o=n(),null!==o&&c(e,o,t,{prefix:i})),o}function l(e=null){null===e&&(e=new RegExp("mpt_")),m(e,s)}function d(e){let t=new RegExp(`(?:^|;\\s?)${e}=(.*?)(?:\\|(\\d+|session|session_timeout))?(?:;|$)`),n=document.cookie.match(t);if(!n)return null;let i=n[2]||"session";return isNaN(i)||(i=+i),{value:decodeURIComponent(n[1]),expiry:i}}function f(){let e=Object(o.getTimestamp)();m(new RegExp("mpt_"),t=>{let n=d(t);if(!n)return;let{expiry:i,value:o}=n;(+i&&i>=e||"session_timeout"===i)&&c(t,o,i)})}function p(e){if("string"==typeof e){if("session"===e||"session_timeout"===e)return e;let t=e.match(/(\d+)([mhd])/);if(t){if("m"===t[2])return Object(o.getTimestamp)()+6e4*t[1];if("h"===t[2])return Object(o.getTimestamp)()+36e5*t[1];if("d"===t[2])return Object(o.getTimestamp)()+864e5*t[1]}}return isNaN(e)?"session":+e}function g(e,t){return null===e&&(e="mpt_"),!1===e||t.startsWith(e)||(t=e+t),encodeURIComponent(t)}function m(e,t){(document.cookie.match(/(?:^|;\s?)([^=]+)/g)||[]).forEach(n=>{let i=decodeURIComponent(n).replace(/^;\s?/,"");e.test(i)&&t(i)})}},function(e,t,n){"use strict";n.r(t),n.d(t,"initEngine",(function(){return y})),n.d(t,"startTracking",(function(){return O})),n.d(t,"startConditionalRecording",(function(){return S})),n.d(t,"pauseTracking",(function(){return v})),n.d(t,"stopTracking",(function(){return w})),n.d(t,"activateSession",(function(){return k})),n.d(t,"getRelTime",(function(){return j})),n.d(t,"maskUrl",(function(){return C})),n.d(t,"checkPI",(function(){return E})),n.d(t,"setProperty",(function(){return T})),n.d(t,"resetRecording",(function(){return N}));var i=n(0),o=n(6),r=n(5),a=n(1),c=n(4),s=n(12),u=n(9),l=n(2),d=n(11),f=n(8),p=n(7);let g=!1,m=!1;const h={},b={};function y(){m||(Object(f.a)(),Object(d.subscribeFrameBridge)("xVid",(e,t)=>{g||(T("x-vid",e.VID,{scope:"session"}),g=!0),e.receivedXVid||Object(d.emitFrameBridge)("xVid",{VID:Object(i.getVid)(),receivedXVid:g},t.source)}),Object(d.emitFrameBridge)("xVid",{VID:Object(i.getVid)(),receivedXVid:g}),m=!0,Object(a.notify)("info","Engine ready"),i.Events.dispatch("tracking_ready",null,{target:window}),i.State.trackingStatus="ready",i.Config.autostartTracking&&O())}function O(){if("resolved"!==i.State.precheckStatus)return;null!==Object(o.getPagename)()&&E({force:!0}),Object(s.b)()}function S(){m||(i.Config.bufferRecording&&null===i.State.recordingToBuffer&&(i.State.recordingToBuffer=!0,Object(l.setCookie)("recording_to_buffer_"+i.Config.idsite,1,"session_timeout")),i.State.conditionalImport=!0,Object(l.setCookie)("conditional_import_"+i.Config.idsite,1,"session_timeout"),i.Config.autostartTracking=!0,Object(o.setTrackingActiveCookie)(!0,"session_timeout"),y())}function v(){let e=i.State.trackingStatus;i.State.trackingStatus="paused",i.State.previousPID=null,"recording"===e&&(Object(c.h)(),I(),Object(a.notify)("⏸️ %cPaused Tracking","color: blue; font-weight: bold"))}function w(e=!1){let t=i.State.trackingStatus;i.State.trackingStatus="stopped",i.State.previousPID=null,"recording"===t&&(Object(c.h)(),Object(r.e)(),Object(s.c)(),I(),Object(u.a)()),"paused"===t&&(Object(r.e)(),Object(s.c)(),Object(u.a)()),e?(Object(a.notify)("🛑 %cStopped Tracking (session)","color: red; font-weight: bold"),Object(l.setCookie)("tracking_stopped_"+i.Config.idsite,1,"session_timeout"),Object(o.setTrackingActiveCookie)(!1),Object(p.a)()):Object(a.notify)("⚠️ %cStopped Tracking","color: orange; font-weight: bold")}function k(e="default"){["recording","paused"].includes(i.State.trackingStatus)&&(i.State.recordingToBuffer&&Object(p.e)(),Object(a.notify)("%c✔️ Session has been flagged for import!","color: green"),Object(r.a)("activateSession",{recordingType:e}))}function j(){return i.State.piStartTime?Object(a.getTimestamp)()-i.State.piStartTime:null}function C(e){return i.Config.maskUrl instanceof RegExp?e=Object(a.anonymizeString)(e,i.Config.maskUrl):"function"==typeof i.Config.maskUrl?e=i.Config.maskUrl(e,a.anonymizeString):i.Config.maskUrl&&"string"==typeof i.Config.maskUrl&&(e=Object(a.anonymizeString)(e,new RegExp(i.Config.maskUrl,"g"))),e}function E({delay:e=null,force:t=!1}={}){if("stopped"===i.State.trackingStatus)return;if(i.Config.stopOnTranslation&&null!==document.querySelector(".translated-ltr, .translated-rtl"))return w(!0),void Object(a.notify)("warn","tracking stopped. translator detected.");if(window.innerHeight<50||window.innerWidth<50)return void Object(a.notify)("warn","tracking stopped. Viewport to small.");if(null!==e)return clearTimeout(h.checkPI),void(h.checkPI=setTimeout(()=>E({force:t}),e));let n=Object(a.getTimestamp)()-i.State.piStartTime;if(n<1e3)return E({delay:1e3-n,force:t});if(function(){if(i.Events.dispatch("delay_pi",!1))return!0;if(i.State.clickEmulationRunning)return!0;let{activeElement:e}=document;if(e&&i.Config.piCheckActiveElement&&null!==i.State.currentPID){if("INPUT"===e.tagName&&!["radio","checkbox","button","submit"].includes(e.type))return!0;if(["TEXTAREA","SELECT"].includes(e.tagName))return!0}return!1}())return E({delay:500,force:t});let s=i.State.pagename,l=Object(o.getPagename)();if(null===l)return void("recording"===i.State.trackingStatus&&v());!function(){let e={pagenameModifier:[],properties:[],nodeConfig:[]};i.State.scopes.forEach(t=>{if(t.isMatching(!0)){let n=t.config;e.pagenameModifier=e.pagenameModifier.concat(n.pagenameModifier),e.properties=e.properties.concat(n.properties),e.nodeConfig=e.nodeConfig.concat(n.nodeConfig)}}),i.State.matchingScopesConfig=e}();let d=function(e){return e.map(({valueCallback:e,...t})=>(t.value="function"==typeof e?e():e,t))}(i.State.matchingScopesConfig.properties),g=function(e){return e.filter(({overwrite:e,name:t,value:n})=>{if(!e)return!1;let i=n!==b[t];return b[t]=n,i})}(d),m=function(e){return e.filter(({overwrite:e})=>!e).map(({name:e,value:t})=>(Array.isArray(t)&&(t=t.join("&")),`${e}:${t}`)).join("\n")}(d);t||s!==l||i.State.propertiesHash!==m?(i.State.propertiesHash=m,function(e){let t="recording"===i.State.trackingStatus;i.State.trackingStatus="recording","initial"===i.State.socketStatus&&(i.State.consoleOpen&&!i.State.consoleSendData||Object(u.c)());i.State.teoLoggingEnabled&&i.State.currentPID&&(Object(f.d)(),Object(f.c)());i.Events.dispatch("before_pi",{pagename:e}),i.State.currentPID&&(I(),Object(r.c)());i.State.currentPID=function(){return String(Object(a.getTimestamp)())+String(Math.floor(9e5*Math.random())+1e5)}(),i.State.pagename=e,Object(a.notify)("info","▶️ %cnewPI: "+e,"color: blue; font-weight: bold"),t||(Object(p.d)(i.State.currentPID),Object(r.d)());i.State.piStartTime=Object(a.getTimestamp)(),Object(r.a)("init",function(e){let t={charset:document.characterSet,client_height:Object(a.getClientHeight)(),con_stats:{},is_iframe:+(parent!=window),is_mutation_stream:1,is_scrolling_disabled:+Object(a.isScrollingDisabled)(),is_new_websdk:!0,is_modern_browser:window._mpt_modern||!1,unmapped_pagename:+i.State.isUnmappedPagename,initial_referer:i.State.initialReferer||"",orientation:Object(a.getOrientation)(),prev_pageid:i.State.previousPID||0,custom_scrolling_element_xpath:null,scroll_left:i.State.scrollPosition.scrollLeft,conditional_import:i.State.conditionalImport,vendors:{}};return{revision:r.b,idsite:i.Config.idsite,VID:Object(i.getVid)(),PID:i.State.currentPID,starttime:i.State.piStartTime,pagename:i.State.pagename,virtualPi:e,url:C(location.href),referer:C(document.referrer),ua:navigator.userAgent,locale:navigator.language,domloadTime:i.State.domloadTime,versions:Object(a.getVersionsString)(),clientWidth:Object(a.getClientWidth)(),scrollHeight:i.State.maxScrollHeight,scrollWidth:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),scrollTop:i.State.scrollPosition.scrollTop,viewport:window.innerWidth+"x"+window.innerHeight,res:screen.width+"x"+screen.height,outerViewport:(window.outerWidth||0)+"x"+(window.outerHeight||0),availableViewport:screen.availWidth+"x"+screen.availHeight,isTouch:Object(a.isTouchDevice)(),extendedProperties:JSON.stringify(t),trackingPersistence:"visit",debugMessages:"",flashVer:0,enginePolls:0}}(t)),t||Object(c.g)();i.Events.dispatch("after_pi",{pagename:e})}(l),null===i.State.previousPID&&d.push({name:"engine.time.load",value:i.State.loadTime-window._mptt,type:"int"}),("production"!==i.Config.container||Object(i.isDebug)())&&d.push({name:"mpt_debug",value:"on"}),d.forEach(({name:e,value:t,...n})=>{Array.isArray(t)?(n.unique=!1,t.forEach(t=>T(e,t,n))):T(e,t,n)}),i.Events.dispatch("property_change",{properties:d})):g.forEach(({name:e,value:t,...n})=>T(e,t,n))}function T(e,t,{type:n="string",session:i=!1,unique:o=!0}={}){null!=t&&(Array.isArray(t)?t.forEach(t=>{T(e,t,{type:n,session:i,unique:!1})}):Object(r.a)("property",{name:e,value:t,scope:i?0:2,dataType:n,unique:o}))}function N(){Object(l.resetCookies)(/^mpt_(tracking_.*|rate_comparator_.*|console_.*|vid|initial_referer)$/),Object(p.a)(()=>{location.reload()})}function I(){i.State.previousPID=i.State.currentPID,i.State.currentPID=null,i.State.pagename=null,i.State.piStartTime=0}},function(e,t,n){"use strict";n.d(t,"g",(function(){return h})),n.d(t,"h",(function(){return b})),n.d(t,"a",(function(){return O})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return w})),n.d(t,"d",(function(){return j})),n.d(t,"b",(function(){return C})),n.d(t,"c",(function(){return E}));var i=n(0),o=n(5),r=n(8),a=n(1),c=n(3);let s,u={},l=-1,d=-1,f={},p=!1,g=!1,m=["onload","onunload","onchange","onfocus","onselect","click","onmouseover","onmousemove","onmouseout","onblur","onkeydown","onkeyup","onkeypress","onenter","onsubmit","onmouseenter","onmouseleave","ontouchstart","ontouchmove","ontouchend"];function h(){T(document.documentElement),function(){f.snapshot=performance.now();let e=N(document,{recursive:!0});if(p&&!Object(i.isDebug)())return Object(c.stopTracking)(),null;Object(i.isDebug)()&&(window.Mpathy.State.jsonDomdata={snapshot:e,mutations:[]});e=JSON.stringify(e),Object(o.a)("snapshot",{snapshot:e}),Object(r.b)({mutationId:"snapshot",mutationData:e,startTime:f.snapshot}),delete f.snapshot}(),p&&!Object(i.isDebug)()||(s=new MutationObserver(I),s.observe(document.documentElement,{subtree:!0,childList:!0,characterData:!0,attributes:!0}))}function b(){s&&s.disconnect()}function y(e){let t={},n=C(e,"maskAttributes"),i="INPUT"===e.tagName&&"password"===e.type;for(let n=0;n<e.attributes.length;n++){let i=e.attributes[n];m.includes(i.name)||(t[i.name]=i.value)}if("INPUT"===e.tagName&&["text","email","number","radio","checkbox","search"].includes(e.type)&&(e.checked&&!t.hasOwnProperty("checked")&&(t.checked=""),!t.value===e.value||i||(t.value=E(e)?Object(a.scrambleString)(e.value):e.value)),"OPTION"===e.tagName&&e.selected&&!t.hasOwnProperty("selected")&&(t.selected=""),0===e.attributes.length)return t;if(null===n&&E(e)&&(n=["value","href","alt","title","placeholder","label"]),Array.isArray(n)&&n.forEach(n=>{"href"===n&&["BASE","LINK","IMAGE","USE"].includes(e.tagName&&e.tagName.toUpperCase())||t.hasOwnProperty(n)&&(t[n]=Object(a.scrambleString)(t[n]))}),"function"==typeof n){let i=n(t,e);void 0!==i&&(t=i)}return t}function O(e,t){if(!e.hasAttribute(t))return null;return y(e)[t]}function S(e){let t=e.textContent;return E(e)&&(t=Object(a.scrambleString)(t)),t}function v(e){if("INPUT"===e.tagName&&"checkbox"===e.type)j(e.mptNodeId,{checked:e.checked?"":null});else if("INPUT"===e.tagName&&"radio"===e.type){let t=Array.from(document.querySelectorAll(e.name?`input[name="${e.name}"]`:null));[e,...t].forEach(e=>j(e.mptNodeId,{checked:e.checked?"":null}))}else"SELECT"===e.tagName&&Array.from(e.childNodes).forEach(t=>{t.selected!==e.mptOptionSelected&&j(t.mptNodeId,{selected:t.selected?"":null})})}function w({target:e}){let t="TEXTAREA"===e.tagName,n="INPUT"===e.tagName&&["text","email","number","search"].includes(e.type);(t||n)&&j(e.mptNodeId,{value:E(e)?Object(a.scrambleString)(e.value):e.value})}function k(e,t){Object(o.a)("mutation",{data:JSON.stringify({t:[[+e,t]]}),mutationId:++d})}function j(e,t){Object(o.a)("mutation",{data:JSON.stringify({at:[[+e,t]]}),mutationId:++d})}function C(e,t,n=null){return e&&e.mptNodeConfig&&e.mptNodeConfig.hasOwnProperty(t)?e.mptNodeConfig[t]:n}function E(e){let t=null;return Object(a.loopNodeTree)(e,e=>e.tagName&&"STYLE"===e.tagName.toUpperCase()?(t=!1,!1):(t=C(e,"maskText"),null===t&&void 0)),null===t&&(t=i.Config.maskFullPage),t}function T(e,t=null){if(e.mptNodeConfig&&e.mptNodeConfig.hasOwnProperty("lastMutationId")&&e.mptNodeConfig.lastMutationId===t&&null!==t)return;[e].concat(Array.from(e.querySelectorAll("*"))).forEach(e=>{e.mptNodeConfig={maskText:A(e),maskAttributes:null,anticlickmap:!1,ignoreAttributesMutation:null,ignoreTextMutation:!1,trackHover:!1,lastMutationId:t}}),Object(a.resolveNodes)([e,".fsrVisible, [mpt-visible]"],{includeContextNode:!0}).forEach(e=>{e.mptNodeConfig.maskText=!1}),Object(a.resolveNodes)([e,"[mpt-anon]"],{includeContextNode:!0}).forEach(e=>{e.mptNodeConfig.maskText=!0}),i.Config.trackHover&&Object(a.resolveNodes)([e,i.Config.trackHover],{includeContextNode:!0}).forEach(e=>{e.mptNodeConfig.trackHover=!0}),Array.from(i.State.matchingScopesConfig.nodeConfig).forEach(({selector:t,config:n})=>{Object(a.resolveNodes)([e,t],{includeContextNode:!0}).forEach(e=>{Object.assign(e.mptNodeConfig,n)})})}function N(e,{recursive:t=!1}={}){if(!e)return null;if(t){if(!function(){if("recording"!==i.State.trackingStatus)return!1;if(p)return Object(i.isDebug)();if(!f.hasOwnProperty("snapshot"))return Object(a.notify)("warn","SanityCheck: sanityData.snapshot does not exist, possible timing issue"),!0;let e=Math.round(performance.now()-f.snapshot);i.Config.maxSnapshotDuration<e&&(p=!0,Object(a.sendStatsRequest)({type:"sanity",msg:`SanityCheck: snapshot exceeded maximum of ${i.Config.maxSnapshotDuration}ms`}),Object(a.notify)("warn","Sanity check: snapshot limit exceeded"));return!p||Object(i.isDebug)()}())return null}else if(R(e))return{id:+e.mptNodeId};let n=++l,o={nT:e.nodeType,id:+n};switch(e.mptNodeId=n,u[n]=e,e.nodeType){case e.DOCUMENT_TYPE_NODE:o.name=e.name,o.publicId=e.publicId,o.systemId=e.systemId;break;case e.DOCUMENT_FRAGMENT_NODE:return null;case e.ELEMENT_NODE:Object.assign(o,function(e){let t={tN:e.tagName,at:y(e)};"http://www.w3.org/2000/svg"===e.namespaceURI&&(t.ns="svg");"SCRIPT"===t.tN&&t.at.hasOwnProperty("src")&&delete t.at.src;return t}(e)),"STYLE"!==o.tN||e.textContent||(!function(e,t){let n=new Text;n.textContent=P(e.sheet.rules),n.mptNodeConfig={maskText:!1},t.cN=[N(n)];let i,o=e.sheet.deleteRule,r=e.sheet.insertRule;e.sheet.deleteRule=(...t)=>{o.apply(e.sheet,t),clearTimeout(i),i=setTimeout(()=>{k(n.mptNodeId,P(e.sheet.rules))},100)},e.sheet.insertRule=(...t)=>{r.apply(e.sheet,t),clearTimeout(i),i=setTimeout(()=>{k(n.mptNodeId,P(e.sheet.rules))},100)}}(e,o),t=!1),"OPTION"===o.tN&&(e.mptOptionSelected=e.selected);break;case e.TEXT_NODE:Object.assign(o,function(e){let t;t=e.parentNode&&"SCRIPT"===e.parentNode.tagName?"":S(e);return{tC:t}}(e));break;case e.COMMENT_NODE:o.tC=""}if(t&&e.childNodes&&e.childNodes.length>0){let n=e.childNodes[0];for(o.cN=[];n;)o.cN.push(N(n,{recursive:t})),n=n.nextSibling}return o}function I(e){let t=++d;if(f[t]=performance.now(),!X(t))return;let n={am:[],r:[],t:[]},a={};for(let i=0;i<e.length;i++){let o=e[i];if(!X(t))return;o.target.parentNode&&["attributes","childList"].includes(o.type)&&T(o.target.parentNode,t),"attributes"===o.type&&x(a,o),"childList"===o.type&&(M(n,o.removedNodes,o.target),_(n,o.addedNodes,{mutationId:t,target:o.target})),"characterData"===o.type&&D(n,o)}return Object.keys(a).length>0&&(n.at=function(e){return Object.keys(e).map(t=>{let n={},i=u[t];if(i){let o=y(i);e[t].forEach(e=>{o.hasOwnProperty(e)?n[e]=o[e]:n[e]=null})}return[+t,n]})}(a)),0===n.am.length&&delete n.am,0===n.r.length&&delete n.r,0===n.t.length&&delete n.t,0!==Object.keys(n).length?(Object(i.isDebug)()&&window.Mpathy.State.jsonDomdata.mutations.push(n),n=JSON.stringify(n),Object(o.a)("mutation",{data:n,mutationId:t}),Object(r.b)({mutationId:t,mutationData:n,startTime:f[t]}),delete f[t],n):void 0}function P(e){return Array.from(e).map(e=>e.cssText).join("\n")}function x(e,{target:t,attributeName:n}){if(!R(t))return;let i=C(t,"ignoreAttributesMutation");Array.isArray(i)&&i.includes(n)||(e.hasOwnProperty(t.mptNodeId)||(e[t.mptNodeId]=[]),e[t.mptNodeId].push(n))}function M(e,t){for(let n=0;n<t.length;n++){let i=t[n];R(i)&&(e.r.includes(i.mptNodeId)||H(i)!==document&&(i.nodeType===Node.ELEMENT_NODE&&M(e,i.childNodes),e.r.push(+i.mptNodeId),delete u[i.mptNodeId],i.mptOldNodeId=i.mptNodeId,delete i.mptNodeId,u.hasOwnProperty(t.mptParentId)&&(i.mptOldParentNode=u[t.mptParentId])))}}function _(e,t,{mutationId:n,target:i=null}={}){for(let o=0;o<t.length;o++){let r=t[o],c=R(r);if(i&&H(i)!==document){M(e,[t]);continue}let s=c?{id:r.mptNodeId}:N(r);if(r.previousSibling){let t=L(r.previousSibling);null===t&&(_(e,[r.previousSibling],{mutationId:n,target:i}),t=r.previousSibling.mptNodeId),s.pS={id:t}}let u=null;R(r.parentNode)?u=L(r.parentNode):R(i)?u=L(i):r.previousSibling&&R(r.previousSibling.parentNode)&&(u=L(r.previousSibling.parentNode)),s.pN={id:u},null===s.pN.id&&Object(a.notify)("warn","added/moved node mutation has no parentId",{addedNode:r,parentNode:r.parentNode,target:i,serializedNode:s}),delete r.mptOldNodeId,e.am.push(s),c||r.nodeType!==Node.ELEMENT_NODE||_(e,r.childNodes,{mutationId:n,target:r})}}function D(e,{target:t}){t.nodeType!==Node.COMMENT_NODE&&!C(t.parentNode,"ignoreTextMutation")&&R(t)&&e.t.push([+t.mptNodeId,S(t)])}function A({tagName:e,type:t}){let n="string"==typeof e&&["INPUT","TEXTAREA","SELECT"].includes(e.toUpperCase());return i.Config.maskFullPage||!n||"INPUT"===e&&["button","submit","reset"].includes(t)?null:i.Config.maskAllInputs||null}function R(e){return e&&e.hasOwnProperty("mptNodeId")}function L(e){return e&&e.hasOwnProperty("mptNodeId")?e.mptNodeId:null}function H(e){let t=e;return Object(a.loopNodeTree)(e,e=>t=e),t}function X(e){if("recording"!==i.State.trackingStatus)return!1;if(g||p)return Object(i.isDebug)();if(!f.hasOwnProperty(e))return Object(a.notify)("warn",`SanityCheck: sanityData[${e}] does not exist, possible timing issue`),!0;let t=Math.round(performance.now()-f[e]);return i.Config.maxMutationDuration<t&&(g=!0,Object(a.sendStatsRequest)({type:"sanity",msg:`SanityCheck: mutation exceeded maximum of ${i.Config.maxMutationDuration}ms`}),Object(a.notify)("warn","Sanity check: mutation limit exceeded")),!g||Object(i.isDebug)()}},function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return b})),n.d(t,"c",(function(){return y})),n.d(t,"e",(function(){return O})),n.d(t,"a",(function(){return v}));var i=n(0),o=n(16),r=n(3),a=n(9),c=n(4),s=n(1),u=n(12);let l,d,f,p=!1,g={},m={0:1,1:4,2:2};const h=101;function b(){p||(p=!0,y(),i.Events.onceInitial("dom_loaded",()=>{M(),w().forEach(({event:e,context:t=null,args:n=[]})=>{t||(t=document),Array.isArray(e)||(e=[e]),e.forEach(e=>t.addEventListener(e,S,...n))}),I()}))}function y(){i.State.merge({maxScrollHeight:Object(s.getScrollingElement)().scrollHeight,lastClickTime:null,clickEmulationRunning:!1,cursorPosition:{pageX:0,pageY:0},scrollPosition:{scrollTop:Object(s.getScrollTop)(),scrollLeft:Object(s.getScrollLeft)()},clientDimensions:{height:Object(s.getClientHeight)(),width:Object(s.getClientWidth)()},windowDimensions:{height:window.innerHeight,width:window.innerWidth}}),l={},d=null,f=null}function O(){w().forEach(({event:e,context:t=null})=>{t||(t=document),Array.isArray(e)||(e=[e]),e.forEach(e=>t.removeEventListener(e,S))}),p=!1}function S(e){if(/^(keydown|mouse(down|move)|touchend|scroll|resize|hashchange|popstate|pageshow)$/.test(e.type)&&Object(u.a)(e),"recording"===i.State.trackingStatus)switch(e.type){case"load":case"pageshow":case"pagehide":!function({type:e}){"pagehide"===e?v("pagehide"):v("load",{eventType:e})}(e);break;case"scroll":!function({target:e}){if(e.nodeType===Node.ELEMENT_NODE)return void v("elementScroll",{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop,nodeId:e.mptNodeId||0,xPath:e.hasOwnProperty("mptNodeId")?Object(s.getElementXPath)(e):null});let t=Object(s.getScrollLeft)(),n=Object(s.getScrollTop)(),o=t-i.State.scrollPosition.scrollLeft,r=n-i.State.scrollPosition.scrollTop;if(!o&&!r)return;i.State.scrollPosition.scrollLeft=t,i.State.scrollPosition.scrollTop=n,v("scroll",{deltaScrollLeft:o,deltaScrollTop:r}),Object(s.isMobile)()&&T();I(),N()}(e);break;case"focus":!function(e){let t=e.target,n=t.form;if(!["INPUT","TEXTAREA","SELECT"].includes(t.nodeName))return;let o=e.hasOwnProperty("blank_value")?"":t.value;Object(c.c)(t)&&(o=Object(s.anonymizeString)(o));let r={fieldId:t.getAttribute("id")||"",fieldName:t.getAttribute("name")||"",fieldMptId:_(t)||null,fieldValue:o,fieldType:t.type,formId:null,formName:null,formMptId:null,tagName:t.tagName,XPath:Object(s.getElementXPath)(t)};n&&(r.formId=n.getAttribute("id")||"",r.formName=n.getAttribute("name")||"",r.formMptId=_(n)||null);if(i.Events.dispatch("focus",r),!r.fieldId&&!r.fieldName&&!r.fieldMptId)return;v("focus",r),Object(s.isMobile)()&&T()}(e);break;case"blur":!function(e){let t,n=e.target;if(!["INPUT","TEXTAREA","SELECT"].includes(n.nodeName))return;switch(n.type){case"password":t="*".repeat(n.value.length);break;case"checkbox":t=+n.checked;break;case"select-one":case"select-multiple":t=Object(c.c)(n)?0:n.selectedIndex;break;case"button":case"file":case"image":case"radio":case"reset":case"submit":break;default:t=n.value,Object(c.c)(n)&&(t=Object(s.anonymizeString)(t))}v("blur",{fieldValue:t})}(e);break;case"change":!function(e){let t=e.target,n=t.form;if(!t)return;let i=e.hasOwnProperty("blank_value")?"":t.value;Object(c.c)(t)&&(i=Object(s.anonymizeString)(i));let o={fieldId:t.getAttribute("id")||"",fieldName:t.getAttribute("name")||"",fieldMptId:_(t)||null,fieldValue:i,formId:null,formName:null,formMptId:null,tagName:t.tagName};n&&(o.formId=n.getAttribute("id")||"",o.formName=n.getAttribute("name")||"",o.formMptId=_(n)||null);v("change",o),Object(c.e)(t)}(e);break;case"resize":!function(){if(Object(s.isMobile)())return void T();let{innerHeight:e,innerWidth:t}=window,n=Object(s.getClientHeight)(),o=Object(s.getClientWidth)();if(e===i.State.windowDimensions.height&&t===i.State.windowDimensions.width)return;v("resize",{clientWidth:o,clientHeight:n,windowHeight:e,windowWidth:t,deltaClientHeight:n-i.State.clientDimensions.height,deltaClientWidth:o-i.State.clientDimensions.width,deltaWindowHeight:e-i.State.windowDimensions.height,deltaWindowWidth:t-i.State.windowDimensions.width}),i.State.clientDimensions.height=n,i.State.clientDimensions.width=o,i.State.windowDimensions.height=e,i.State.windowDimensions.width=t,I()}();break;case"mousedown":k(e);break;case"keydown":!function(e){if([16,17,18,91,93,224].indexOf(e.keyCode)>-1)return;let{keyCode:t,key:n}=function({target:e,keyCode:t,key:n=""}){switch(n=String(n)){case"Down":n="ArrowDown";break;case"Up":n="ArrowUp";break;case"Left":n="ArrowLeft";break;case"Right":n="ArrowRight";break;case"Esc":n="Escape"}"INPUT"===e.tagName&&"password"===e.type&&(t=106,n="*");if(!Object(c.c)(e))return{keyCode:t,key:n};/^(6[3-9]|[78]\d|90)$/.test(t)?(t=88,n="X"):/^(49|5[0-7]|9[6-9]|10[0-5])$/.test(t)&&(t=48,n="0");return{keyCode:t,key:n}}(e);v("keydown",{modKey:C(e),keyCode:t,key:n})}(e);break;case"touchstart":case"touchend":case"touchmove":case"touchcancel":!function(e){let t=e.type;Array.from(e.changedTouches||[]).forEach(n=>{let o=n.identifier,r=l[t]||{};if("touchmove"===t&&r[o]&&r[o].screenX===n.screenX&&r[o].screenY===n.screenY)return;l.hasOwnProperty(t)||(l[t]={}),l[t][o]={screenX:n.screenX,screenY:n.screenY};let a={fingerId:o,screenX:Math.round(n.screenX),screenY:Math.round(n.screenY),pageX:Math.round(n.pageX),pageY:Math.round(n.pageY),clientX:Math.round(n.clientX),clientY:Math.round(n.clientY)};return["touchstart","touchmove"].includes(t)&&(a={...a,force:Math.round(100*(n.force||0)),angle:n.rotationAngle||0,radiusX:Math.round(n.radiusX||0),radiusY:Math.round(n.radiusY||0)}),"touchstart"===t&&(a={...a,tagName:n.target.tagName,id:Object(c.a)(n.target,"id"),href:Object(s.getNodeHref)(n.target),anticlickmap:+j(n.target),xpath:Object(s.getElementXPath)(n.target)}),("touchend"===t||"touchmove"===t&&window.pageYOffset<5)&&T(),v(t,a),function(e,t,n){if(clearTimeout(g.clickEmulate),"touchstart"===t.type){if(1!==t.touches.length)return i.State.clickEmulationRunning=!1,void(d=null);i.State.clickEmulationRunning=Object(s.getTimestamp)(),d={target:e.target,button:0,el_rel_coords:E(e.target,e.clientX,e.clientY),el_dimensions:Object(s.getNodeDimensions)(e.target),clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,anticlickmap:n.anticlickmap,xPath:n.xpath}}"touchmove"!==t.type&&"touchcancel"!==t.type||(i.State.clickEmulationRunning=!1,d=null);"touchend"===t.type&&setTimeout((function(){if(i.State.clickEmulationRunning){let e=Object(s.getTimestamp)()-i.State.lastClickTime,t=Object(s.getTimestamp)()-i.State.clickEmulationRunning;e>50&&t<700&&k({type:"mousedown",emulated:!0})}i.State.clickEmulationRunning=!1,d=null}),25)}(n,e,a),a})}(e);break;case"gesturestart":case"gesturechange":case"gestureend":!function({type:e,scale:t,rotation:n,target:i}){let o={scale:t,rotation:n};"gesturestart"===e&&(o.tagName=i.tagName,o.nodeId=Object(c.a)(i,"id"));v(e,o)}(e);break;case"orientationchange":T(),v("orientationChange",{orientation:Object(s.getOrientation)()});break;case"mousemove":!function({pageX:e,pageY:t}){if(e===i.State.cursorPosition.pageX&&t===i.State.cursorPosition.pageY)return;v("mousemove",{buttonId:0,modKey:0,pageX:Math.round(e-i.State.cursorPosition.pageX),pageY:Math.round(t-i.State.cursorPosition.pageY)}),i.State.cursorPosition={pageX:e,pageY:t}}(e);break;case"mouseover":case"mouseout":!function(e){if(!(null!==e&&"object"==typeof e&&e.target&&e.target instanceof Element))return;let t=e.target;if("mouseover"===e.type)for(P(t);t;)P(t),t=t.parentNode;else{let n=e.relatedTarget||e.toElement;for(x(t,n);t;)x(t,n),t=t.parentNode}}(e);break;case"input":Object(c.f)(e)}}function v(e,t={}){if(!o.hasOwnProperty(e))return void Object(s.notify)("error","Unknown Event Type: "+e);let n=Object(r.getRelTime)(),i=o[e];!1!==i.logLevel&&Object(s.notify)(i.logLevel||"debug",`Event ${e} at ${n}ms`,t),t={type:i.id,time:n,...t};let c=o[e].dataOrder||["type"];return Object(a.e)(c.map(e=>t.hasOwnProperty(e)?"boolean"==typeof t[e]?+t[e]:t[e]:e)),t}function w(){let e=[];return e.push({event:["load","pageshow","pagehide","hashchange","popstate"]}),e.push({event:["scroll","focus","blur","change","input"],args:[!0]}),e.push({event:"resize",context:window}),e.push({event:"mousedown"}),i.Config.recordKeyEvents&&e.push({event:"keydown"}),Object(s.isTouchDevice)()?(e.push({event:["touchstart","touchend","touchmove","touchcancel"]}),e.push({event:["gesturestart","gesturechange","gestureend"]}),e.push({event:"orientationchange",context:window})):(e.push({event:"mousemove"}),e.push({event:["mouseover","mouseout"],args:[!0]})),e}function k(e){if(i.State.lastClickTime=Object(s.getTimestamp)(),Object(s.isTouchDevice)()){if(window.clearTimeout(g.clickEmulate),i.State.clickEmulationRunning){if(null===d&&e.emulated)return;e=Object.assign({},e,d)}i.State.clickEmulationRunning=!1}let{target:t,pageX:n,pageY:o,button:r}=e;if(!t)return;if(!("OPTION"!==t.tagName||n&&o))return;let a={buttonId:m[r],modKey:C(e),pageX:Math.round(n),pageY:Math.round(o)},u=e.elementDimensions||Object(s.getNodeDimensions)(t),l=e.elemenRelCoords||E(t,e.clientX,e.clientY),f=function(e){let t=[];for(;e&&e!=document;){let n=e.hasOwnProperty("mptClickableChild")?e.mptClickableChild.rect:Object(s.getNodeDimensions)(e),i=e.hasOwnProperty("mptOldParentNode")?e.mptOldParentNode:e.parentNode;i&&document&&document.Element&&i instanceof document.Element&&(n.left=n.left-parseInt(document.getComputedStyle(i).getPropertyValue("text-indent"))),n.width=e.offsetWidth||n.width,n.height=e.offsetHeight||n.height,t.push(n),e=i}return t}(t),p=e.xPath||Object(s.getElementXPath)(t);if(l.x<0||l.y<0||l.x>u.width||l.y>u.height){u.width=200,u.height=200;let e=Math.floor(l.x/u.width)*u.width,t=Math.floor(l.y/u.width)*u.width;l.x=l.x-e,l.y=l.y-t,f.unshift({left:u.left+e,top:u.top+t,width:u.width,height:u.width}),p+="/MPTHIDDEN"+e+"X"+t+"[1]"}let h=function(e){let t=[];return Array.from(e).forEach((n,i)=>{let o=e.length>i+1?e[i+1]:null,r=[n.width,n.height,n.left,n.top,0,0,1,0];o&&(r[4]=n.left-o.left,r[5]=n.top-o.top,o.width>0&&n.width>0&&(r[6]=n.width/o.width,r[7]=(o.left+.5*o.width-(.5*n.width+n.left))/(.5*n.width)),r[6]!==Math.ceil(r[6])&&(r[6]=r[6].toFixed(5)),r[7]!==Math.ceil(r[7])&&(r[7]=r[7].toFixed(5))),t.unshift(r.join(";"))}),t.join("/")}(f),b=j(t);b||"SELECT"!==t.tagName||(b=l.y<-4||l.y>u.height+4),v("mousedown",{...a,tagName:t.tagName,id:Object(c.a)(t,"id"),href:Object(s.getNodeHref)(t),anticlickmap:+b,xpath:p,position:Math.round(l.x)+","+Math.round(l.y),dimensions:Math.round(u.width)+","+Math.round(u.height),dimensionPath:h}),i.State.cursorPosition={pageX:n,pageY:o}}function j(e){let t=!1;return Object(s.loopNodeTree)(e,e=>{if(Object(c.b)(e,"anticlickmap"))return t=!0,!1}),t}function C({ctrlKey:e,altKey:t,shiftKey:n,metaKey:i}){return(e?1:0)+(t?2:0)+(n?4:0)+(i?8:0)}function E(e,t,n){let i=Object(s.getNodeDimensions)(e),o=e.hasOwnProperty("mptOldParentNode")?e.mptOldParentNode:e.parentNode,r=window.getComputedStyle(e).getPropertyValue("position");return o&&o instanceof Element&&["absolute","relative","fixed"].includes(r)&&(i.left=i.left-parseInt(window.getComputedStyle(o).getPropertyValue("text-indent"))),{x:Math.round(t-i.left),y:Math.round(n-i.top)}}const T=Object(s.debounce)(()=>{v("scaleChange",{clientHeight:Object(s.getClientHeight)(),clientWidth:Object(s.getClientWidth)(),pageXOffset:window.pageXOffset,pageYOffset:window.pageYOffset})},100),N=Object(s.debounce)(()=>{let{scrollHeight:e}=Object(s.getScrollingElement)();e>i.State.maxScrollHeight&&(v("scrollHeight",{scrollHeight:e}),i.State.maxScrollHeight=e)},1e3),I=Object(s.debounce)(()=>{let e=Object(s.getScrollTop)(),t=Math.ceil(e/50),n=Math.floor((e+Object(s.getClientHeight)())/50)-t,i=t+";"+n;i!==f&&(v("areaVisibility",{firstArea:t,countAreas:n}),f=i)},500);function P(e){Object(c.b)(e,"trackHover")&&!e.mptSimulateHover&&(Object(c.d)(e.mptNodeId,{"mpt-hover":""}),e.mptSimulateHover=!0)}function x(e,t){if(Object(c.b)(e,"trackHover")&&e.mptSimulateHover){for(;t;){if(t===e)return;t=t.parentNode}Object(c.d)(e.mptNodeId,{"mpt-hover":null}),delete e.mptSimulateHover}}function M(){"string"==typeof i.Config.clickableElements&&Object(s.resolveNodes)(i.Config.clickableElements).forEach(e=>{let t={};Array.from(e.children).forEach(e=>{t[e.tagName]=(t[e.tagName]||0)+1,e.mptClickableChild={index:t[e.tagName],rect:Object(s.getNodeDimensions)(e)}})}),setTimeout(M,500)}function _(e){let t=e.getAttribute("mptid");if(t)return t;if("FORM"===e.nodeName){let n=Array.from(document.forms||[]).findIndex(t=>e===t);return~n&&e.setAttribute("mptid",n),t}let n=e.form||null,i=n?n.elements:document.getElementsByTagName(e.tagName),o=Array.from(i).findIndex(t=>t===e);return t=`${e.tagName};${function(e){if(null==e)return null;if(e.getAttribute("name"))return"name:"+e.getAttribute("name");if(e.getAttribute("id"))return"id:"+e.getAttribute("id");return"mptid:"+_(e)}(n)};${o}`,e.setAttribute("mptid",t),t}},function(e,t,n){"use strict";n.r(t),n.d(t,"Matcher",(function(){return m})),n.d(t,"Property",(function(){return h})),n.d(t,"startProject",(function(){return b})),n.d(t,"addPagename",(function(){return y})),n.d(t,"addRate",(function(){return O})),n.d(t,"resolvePrecheck",(function(){return S})),n.d(t,"resolvePrecheckAsync",(function(){return v})),n.d(t,"rejectPrecheck",(function(){return w})),n.d(t,"getPagename",(function(){return k})),n.d(t,"addScope",(function(){return j})),n.d(t,"delayCheckPI",(function(){return C})),n.d(t,"setTrackingActiveCookie",(function(){return E}));var i=n(1),o=n(0),r=n(3),a=n(10);class c{constructor(e){this.config={matcherCallback:e,pagenameModifier:[],properties:[],listeners:[],nodeConfig:[]},this._cachedMatching=!1,this._boundListeners=[],o.Events.on("after_pi",()=>{this.unbindListeners(this.isMatching),this.isMatching()&&this.bindListeners()})}isMatching(e){return e&&(this._cachedMatching=Object(a.applyMatcher)(this.config.matcherCallback)),this._cachedMatching}addNodeConfig(e,t={}){this.config.nodeConfig.push({selector:e,config:t})}addPagenameModifier(e,t,n=!1){this.config.pagenameModifier.push({pagename:e,matcherCallback:t,override:n})}applyPagenameModifier(e){return this.config.pagenameModifier.forEach(t=>{t.pagename instanceof Function?e=t.pagename(e)||null:Object(a.applyMatcher)(t.matcherCallback)&&(e=t.override?t.pagename:e+t.pagename)}),e}addProperty(e,t,n={}){this.config.properties.push({name:e,valueCallback:t,...n})}on(e,t,n){Object(i.notify)("warn","Scope.on() is deprecated an will be removed in the future"),this.config.listeners.push({selector:e,event:t,callback:n})}bindListeners(){this.config.listeners.forEach(({selector:e,event:t,callback:n})=>{Object(i.resolveNodes)(e).forEach(e=>{let{bind:i,unbind:o}=t(e,n);this._boundListeners.push(o),i()})})}unbindListeners(){this._boundListeners.forEach(e=>{this._cachedMatching||e()}),this._boundListeners=[]}}var s=n(13),u=n(2),l=n(14),d=n(15);let f,p,g=Object(i.getDeviceType)();const m=n(10),h=n(14);function b(){Object(i.notify)("info",`started evaluating site #${o.Config.idsite} (Upload Time ${o.Config.uploadTime||"none"})`),null!==o.Config.idsite?(o.State.rateComparator=+Object(u.rememberCookie)("rate_comparator_"+o.Config.idsite,o.Config.trackingCookieLifetime,()=>{let e=100*Math.random();return Object(i.notify)("🎲 rate comparator has been diced to: "+e),e}),Object(o.selectTrackingServer)(),function(){if(!new RegExp(o.Config.domain,"i").test(location.hostname))return w("Domain Mismatch");if(o.Config.devices&&!~o.Config.devices.indexOf(g))return w("Device Type Mismatch");"function"==typeof o.Config.customcode&&o.Config.customcode(window.Mpathy,window.Mpathy.Project);if(function(){let e=o.Config.setup;Array.isArray(e.pagenames)&&e.pagenames.forEach(T);"global"===o.Config.trackingMode&&y(()=>(o.State.isUnmappedPagename=!0,"documentTitle"===o.Config.autoPagenames?document.title:location.pathname));Array.isArray(e.properties)&&e.properties.forEach(N);Array.isArray(e.rates)&&e.rates.forEach(I);if(o.Config.defaultRates){let{desktop:e,tablet:t,phone:n}=o.Config.defaultRates;O(/.*/,{desktop:e,tablet:t,phone:n})}Array.isArray(e.unmasking)&&e.unmasking.forEach(e=>P("unmasking",e));Array.isArray(e.anonymization)&&e.anonymization.forEach(e=>P("masking",e))}(),+Object(u.getCookie)("tracking_stopped_"+o.Config.idsite))return w("Tracking Stopped");"pending"!==o.State.precheckStatus||o.Config.asyncPrecheck||S()}()):Object(i.notify)("warn","Could not start project: Missing site configuration")}function y(e,t){t="function"==typeof t?t:m.url(t),o.State.pagenames.push({pagename:e,matcherCallback:t})}function O(e,t){e="function"==typeof e?e:m.pagename(e),o.State.rates.push({matcherCallback:e,rate:t})}function S(){if(clearInterval(f),clearTimeout(p),"pending"!==o.State.precheckStatus)return void Object(i.notify)("warn","Precheck has already resolved.");return null===k()?w("Pagename Mismatch"):function(){if(Array.isArray(o.Config.setup.blacklist))return o.Config.setup.blacklist.some(s.a);return!1}()?w("Page Blacklisted"):(Object(i.notify)("%c✔️ Precheck resolved successfully!","color: green"),o.State.precheckStatus="resolved",function(){let e=o.State.rates.find(({matcherCallback:e})=>Object(a.applyMatcher)(e));if(!e)return;o.Config.trackingRate="object"==typeof e.rate?+e.rate[g]:+e.rate}(),o.Events.dispatch("project_resolved"),+Object(u.getCookie)("tracking_active_"+o.Config.idsite)?Object(r.initEngine)():o.Config.useSamplingRates&&(!function(){let e=o.State.rateComparator<=o.Config.trackingRate;return E(e),e}()?Object(i.notify)("log","⚠️ %cRecording not started automatically: Rate Mismatch.","color: orange"):Object(r.initEngine)()),Object(d.a)(),!0)}function v({callback:e,interval:t=500,timeout:n=1e4}){e(),"pending"===o.State.precheckStatus&&(f=setInterval(e,t),p=setTimeout(()=>{clearInterval(f),w("asyncResolve Timeout")},n))}function w(e){return clearInterval(f),clearTimeout(p),o.State.precheckStatus="rejected",o.State.rejectMessage=e,o.Events.dispatch("project_resolved"),Object(i.notify)("🛑 %cTracking rejected:","color: red; font-weight: bold",e),!1}function k(){let e=null;return o.State.isUnmappedPagename=!1,o.State.pagenames.some(({pagename:t,matcherCallback:n})=>{if(t instanceof Function?e=t()||null:Object(a.applyMatcher)(n)&&(e=t||null),null!==e)return o.State.pagename=e,!0}),null!==e&&"resolved"===o.State.precheckStatus&&o.State.scopes.forEach(t=>{t.isMatching(!0)&&(e=t.applyPagenameModifier(e),o.State.pagename=e)}),e}function j(e,t){"function"!=typeof e&&(e=m.pagename(e));let n=new c(e);o.State.scopes.push(n),t instanceof Function&&t(n)}function C(e){return()=>Object(r.checkPI)({delay:e})}function E(e,t=null){Object(u.setCookie)("tracking_active_"+o.Config.idsite,+e,t||o.Config.trackingCookieLifetime)}function T(e){let{name:t=null,matchAll:n=!1,conditions:i=[],anonymizePage:r=!1,unmaskPage:a=!1}=e,c=o.Config.maskFullPage?a:r;y(t,m.conditions(n,i)),c&&j(m.conditions(n,i),e=>{e.addNodeConfig("body",{maskText:!o.Config.maskFullPage})})}function N(e){let{name:t="",type:n="",matchAll:i=!1,config:o={},conditions:r=[],selector:a="",overwrite:c=!1,decimalSeparator:s,defaultValue:u=null,values:d=[]}=e;o={sessionProperty:!1,...o},j(m.conditions(i,r),e=>{let i,r={overwrite:c,session:o.sessionProperty};switch(n){case"count":i=Object(l.count)(a),r.type="int";break;case"extract_text":i=Object(l.extractText)(a,u);break;case"extract_number":i=Object(l.extractNumber)(a,u,s),r.type="float";break;case"multiple":i=Object(l.multiple)(d,u)}e.addProperty(t,i,r)})}function I(e){let{desktop:t=0,tablet:n=0,phone:i=0,matchAll:o=!1,conditions:r=[]}=e;O(m.conditions(o,r),{desktop:t,tablet:n,phone:i})}function P(e,t){let{conditions:n=[],matchAll:i=!1,scope:o="global",selector:r=null}=t;r="selector"===o?r:"body",j(m.conditions(i,n),t=>{let n="masking"===e;t.addNodeConfig(r,{maskText:n})})}},function(e,t,n){"use strict";n.d(t,"b",(function(){return S})),n.d(t,"d",(function(){return v})),n.d(t,"f",(function(){return w})),n.d(t,"e",(function(){return k})),n.d(t,"c",(function(){return j})),n.d(t,"a",(function(){return C}));var i=n(1),o=n(0),r=n(9),a=n(2),c=n(3),s=n(8);let u,l=!1,d="",f=null,p=null,g=[],m=[],h=0,b=0,y=0,O=!1;function S(){if(l)return;l=!0,d="pages_"+o.Config.idsite,Object(s.e)({bufferRecordingType:o.Config.bufferRecording});let e=setInterval(()=>{h=0},1e4);try{let t=window.indexedDB.open("mpathy-local-buffer",1);t.addEventListener("upgradeneeded",({target:e})=>{u=e.result,u.createObjectStore(d,{keyPath:"idpage"})}),t.addEventListener("success",({target:t})=>{if(u=t.result,!u.objectStoreNames.contains(d))return Object(i.notify)(`📝 Site ID (${o.Config.idsite}) has changed on same domain --\x3e resetting local buffer`),clearInterval(e),l=!1,u.close(),void C(S);u.addEventListener("close",()=>{Object(i.notify)("warn","local buffer connection closed"),D()}),function(e){let t=P(d).openCursor();t.addEventListener("success",t=>{let n=t.target.result;n?(b+=n.value.events.length,y+=n.value.piCount,g.push(n.value),n.continue()):e()}),t.addEventListener("error",()=>Object(i.notify)("error","Error trying to get initial indexeddb pages"))}(()=>{let e=!1,t=E();if(g.length){let{lastActivity:t}=g[g.length-1];e=Object(i.getTimestamp)()-t>18e5}O=0===g.length||0===t||e,0===t||e?x(_):_()})}),t.addEventListener("error",()=>{Object(i.notify)("error","error connecting local buffer database"),k()})}catch(e){Object(i.notify)("warn","Could not open indexedDB --\x3e transition to websocket"),k()}}function v(e){f=e}function w(e){m.push(e)}function k(){o.State.recordingToBuffer=!1,Object(a.setCookie)("recording_to_buffer_"+o.Config.idsite,0,"2h"),D();let{newEvents:e,newPis:t}=H();for(L(e,t),Object(r.d)();g.length>0;){let{events:e}=g.shift();for(let t=0;t<e.length;t++)Object(r.e)(e[t])}u?x():M()}function j(e=!0){D(),Object(c.pauseTracking)(),v(null),m=[],h+=1,Object(c.startTracking)(),e?x(_):_()}function C(e){u&&u.close();let t=window.indexedDB.deleteDatabase("mpathy-local-buffer"),n=!1;return D(),t.addEventListener("success",()=>{n=!0,M(),"function"==typeof e&&e()}),setTimeout(()=>{!n&&u&&(Object(i.notify)("warn","Can't delete IndexedDB as it's in use by another process or tab. Trying to clear IndexedDB instead"),x(()=>{M(),"function"==typeof e&&e()}))},500),t}function E(){return+localStorage.getItem("mpt_buffer_size")}function T(e){localStorage.setItem("mpt_buffer_size",e)}function N(){return+localStorage.getItem("mpt_discarded_pis")}function I(e){localStorage.setItem("mpt_discarded_pis",e)}function P(e){return u.transaction(e,"readwrite").objectStore(e)}function x(e){let t=P(d).clear();M(),"function"==typeof e&&t.addEventListener("success",e),t.addEventListener("error",()=>{Object(i.notify)("error","error clearing stored pages"),"function"==typeof e&&e()})}function M(){g=[],T(0),I(0),b=0,y=0}function _(){p=setInterval(A,1e3)}function D(){clearInterval(p)}function A(){let{newEvents:e,newEventsTotalSize:t,newPis:n}=H();b+=e.length;let r=1024*o.Config.bufferRecordingLimit*1024,a=E(),c=a+t;c<r?(T(c),R(L(e,n))):"rolling"===o.Config.bufferRecording?(Object(i.notify)("warn","local buffer reached its limit --\x3e deleting older pages"),D(),t>r?(x(),m=[],Object(i.notify)("Deleting all buffer data and stop buffering for this page as total size of new events exceeds total buffer")):h>=3?(x(),m=[],Object(i.notify)("Deleting all buffer data and stop buffering for this page as too many snapshots were generated (>3 in 10000ms")):function(e,t,n,r){let a=1024*o.Config.bufferRecordingLimit*1024,c=e,s=P(d).openCursor();s.addEventListener("success",e=>{let o=e.target.result;if(!o)return;let{events:s,idpage:u,piCount:l}=o.value,{idpage:d}=g[0],m=Object(i.getBlobSize)(s);if(d===u&&d===f)return Object(i.notify)("Only one entry and buffer is full --\x3e clearing whole buffer and restarting with new Snapshot"),j();o.delete(),Object(i.notify)(`🚮 Entry PID: ${u}, Size: ${Math.round(m/1024)}kb has been deleted from local buffer`),g=g.filter(e=>u!==e.idpage),c-=m,b-=s.length,y-=l,I(N()+l),c+t>a?(T(c),o.continue()):(T(c+t),R(L(n,r)),p=setInterval(A,1e3))}),s.addEventListener("error",()=>Object(i.notify)("error","Error trying to parse db with cursor API"))}(a,t,e,n)):"offload"===o.Config.bufferRecording&&(Object(i.notify)("warn","local buffer reached its limit --\x3e transitioning to websocket"),k()),Object(s.e)({bufferedSize:a,bufferedEvents:b,bufferedPis:y,bufferedDiscardedPis:N()})}function R(e){P(d).put(e).addEventListener("error",()=>{Object(i.notify)("error","error storing page")})}function L(e,t){let n=g.find(e=>e.idpage===f);return n||(n={idpage:f,events:[],piCount:0},g.push(n)),n.events=n.events.concat(e),n.lastActivity=Object(i.getTimestamp)(),n.piCount+=t,y+=t,n}function H(){let e=[],t=0,n=0;for(;m.length>0;){let a=m.shift();13===a[0]&&(n+=1),!o.Config.bufferRecordingCompression||O&&!o.Config.bufferCompressionFirstPi||Object(r.b)(a),O&&15===a[0]&&(O=!1),t+=Object(i.getBlobSize)(a),e.push(a)}return{newEvents:e,newEventsTotalSize:t,newPis:n}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"e",(function(){return p})),n.d(t,"d",(function(){return g}));var i=n(1),o=n(3),r=n(0);let a={idsite:0,pagename:"",snapshotSize:0,snapshotTime:0,mutationCount:0,maxMutationSize:0,maxMutationTime:0,totalMutationSize:0,totalMutationTime:0,piDuration:0,bufferedSize:0,bufferedPis:0,bufferedDiscardedPis:0,bufferedEvents:0,bufferRecordingType:"none"},c=["snapshotSize","snapshotTime","bufferedSize","bufferedPIs","bufferedEvents","bufferRecordingType"],s={...a},u=!1;function l(){if(r.State.teoLoggingEnabled=Object(r.isDebug)()||Object(i.checkRateByVid)(r.Config.teoLoggingSampleRate),r.State.teoLoggingEnabled){u=!0;try{let e=localStorage.getItem("mpt_teo_stats");e&&g(JSON.parse(e))}catch(e){Object(i.notify)("warn","Could not parse preserved TEO Stats from last PI: "+e)}localStorage.removeItem("mpt_teo_stats"),window.addEventListener("beforeunload",m)}}function d(){let e={...a};c.forEach(t=>delete e[t]),s={...s,...e}}function f({mutationId:e,mutationData:t,startTime:n}){if(!u)return;let a=performance.now(),c=Math.round(a-n),l=Number(new Blob([t],{type:"application/json"}).size)||0;isNaN(c)||isNaN(l)||("snapshot"===e?function({mutationSize:e,mutationTime:t}){let n=t>200||e>1e6;Object(i.notify)(n?"warn":"log",`Processing DOM Snapshot took ${t}ms for a size of ${Math.round(e/1e3)}kb`),s.snapshotSize=e,s.snapshotTime=t}({mutationSize:l,mutationTime:c}):function({mutationSize:e,mutationTime:t}){(t>200||e>25e4)&&Object(i.notify)("warn",`Processing mutation took ${t}ms for a size of ${Math.round(e/1e3)}kb`);s.maxMutationSize=Math.max(s.maxMutationSize,e),s.maxMutationTime=Math.max(s.maxMutationTime,t),s.totalMutationSize+=e,s.totalMutationTime+=t,s.piDuration=Object(o.getRelTime)()||0,s.mutationCount+=1}({mutationSize:l,mutationTime:c}),s.pagename=r.State.pagename,s.idsite=r.Config.idsite)}function p(e){s={...s,...e}}function g(e={}){e.msg=JSON.stringify(e.msg||s),Object(i.sendStatsRequest)({type:"teo",...e})}function m(){if(!r.State.teoLoggingEnabled)return;let e={idsite:r.Config.idsite,pid:r.State.currentPID||42,vid:Object(r.getVid)(),pn:r.State.pagename,url:location.href,user_agent:window.navigator.userAgent,versions:Object(i.getVersionsString)(),msg:s};localStorage.setItem("mpt_teo_stats",JSON.stringify(e))}},function(e,t,n){"use strict";n.d(t,"c",(function(){return w})),n.d(t,"d",(function(){return k})),n.d(t,"a",(function(){return j})),n.d(t,"e",(function(){return C})),n.d(t,"b",(function(){return E}));var i=n(1),o=n(0),r=n(3),a=n(5),c=String.fromCharCode;function s(e){return null==e?"":function(e,t,n){if(null==e)return"";var i,o,r,a={},c={},s="",u="",l="",d=2,f=3,p=2,g=[],m=0,h=0;for(r=0;r<e.length;r+=1)if(s=e.charAt(r),Object.prototype.hasOwnProperty.call(a,s)||(a[s]=f++,c[s]=!0),u=l+s,Object.prototype.hasOwnProperty.call(a,u))l=u;else{if(Object.prototype.hasOwnProperty.call(c,l)){if(l.charCodeAt(0)<256){for(i=0;i<p;i++)m<<=1,h==t-1?(h=0,g.push(n(m)),m=0):h++;for(o=l.charCodeAt(0),i=0;i<8;i++)m=m<<1|1&o,h==t-1?(h=0,g.push(n(m)),m=0):h++,o>>=1}else{for(o=1,i=0;i<p;i++)m=m<<1|o,h==t-1?(h=0,g.push(n(m)),m=0):h++,o=0;for(o=l.charCodeAt(0),i=0;i<16;i++)m=m<<1|1&o,h==t-1?(h=0,g.push(n(m)),m=0):h++,o>>=1}0==--d&&(d=Math.pow(2,p),p++),delete c[l]}else for(o=a[l],i=0;i<p;i++)m=m<<1|1&o,h==t-1?(h=0,g.push(n(m)),m=0):h++,o>>=1;0==--d&&(d=Math.pow(2,p),p++),a[u]=f++,l=String(s)}if(""!==l){if(Object.prototype.hasOwnProperty.call(c,l)){if(l.charCodeAt(0)<256){for(i=0;i<p;i++)m<<=1,h==t-1?(h=0,g.push(n(m)),m=0):h++;for(o=l.charCodeAt(0),i=0;i<8;i++)m=m<<1|1&o,h==t-1?(h=0,g.push(n(m)),m=0):h++,o>>=1}else{for(o=1,i=0;i<p;i++)m=m<<1|o,h==t-1?(h=0,g.push(n(m)),m=0):h++,o=0;for(o=l.charCodeAt(0),i=0;i<16;i++)m=m<<1|1&o,h==t-1?(h=0,g.push(n(m)),m=0):h++,o>>=1}0==--d&&(d=Math.pow(2,p),p++),delete c[l]}else for(o=a[l],i=0;i<p;i++)m=m<<1|1&o,h==t-1?(h=0,g.push(n(m)),m=0):h++,o>>=1;0==--d&&(d=Math.pow(2,p),p++)}for(o=2,i=0;i<p;i++)m=m<<1|1&o,h==t-1?(h=0,g.push(n(m)),m=0):h++,o>>=1;for(;;){if(m<<=1,h==t-1){g.push(n(m));break}h++}return g.join("")}(e,15,(function(e){return c(e+32)}))+" "}var u=n(7);let l,d,f=!1,p=0,g=!1,m=String.fromCharCode(0),h=String.fromCharCode(1),b=[],y=null,O=0,S=null,v=!1;function w(){f||(window.addEventListener("beforeunload",j),f=!0),o.State.recordingToBuffer?(Object(i.notify)("Recording events to local buffer."),o.State.socketStatus="buffer",Object(u.b)()):k()}function k(){if("open"===o.State.socketStatus||"pending"===o.State.socketStatus)return;let e=`wss://${o.Config.trackingServerHost}/ws/?vid=${Object(o.getVid)()}`;"initial"===o.State.socketStatus&&(o.State.socketStatus="pending",Object(i.notify)("connecting websocket to "+e)),"reconnect"===o.State.socketStatus&&Object(i.notify)("reconnecting websocket to "+e),clearTimeout(S),S=setTimeout(()=>{_("WebSocket Error: Socket could not open within 10 seconds and no exception was thrown")},1e4);try{l=new WebSocket(e),l.onopen=T,l.onclose=N,l.onmessage=I,l.onerror=P}catch(e){Object(i.notify)("socket failed to connect",e),_("WebSocket Error (Socket Opening Exception); Exception: "+e)}p++}function j(){if(l&&"open"===o.State.socketStatus){clearTimeout(S),function(){for(;b[0];)M(b.shift())}(),o.State.socketStatus="closed",Object(i.notify)("closing socket");try{l.close()}catch(e){Object(i.notify)("error while closing socket",e),_("WebSocket Error (Socket Closing Exception); Exception: "+e)}o.Events.dispatch("socket_closed"),clearInterval(d)}}function C(e){o.State.recordingToBuffer?Object(u.f)(e):(b.push(e),x())}function E(e){return 15===e[0]&&e[2].length>=o.Config.compressionSizeMin&&e[2].length<=o.Config.compressionSizeMax&&"{"===e[2][0]?e[2]=s(e[2]):14===e[0]&&e[1].length>=o.Config.compressionSizeMin/5&&e[1].length<=o.Config.compressionSizeMax/5&&"{"===e[1][0]&&(e[1]=s(e[1])),e}function T(){clearTimeout(S),o.State.nativeCompressionSupported="string"==typeof l.extensions&&!!~l.extensions.indexOf("permessage-deflate"),l.send("MTP/1.0\n"+m),"reconnect"===o.State.socketStatus?Object(a.a)("reconnect",{PID:o.State.currentPID}):Object(a.a)("connectTime",{clientTime:Object(i.getTimestamp)()}),o.State.socketStatus="open",o.Events.dispatch("socket_open"),p=0,g&&o.Events.dispatch("socket_switched_server"),d=setInterval(()=>{"recording"===o.State.trackingStatus&&Object(a.a)("ping")},6e4),x()}function N(){return"closed"===o.State.socketStatus?(o.State.socketStatus="initial",void("stopped"!==o.State.trackingStatus&&Object(r.stopTracking)())):p>30?(Object(i.notify)("warn","maximal count of socket reconnect tries reached. stopping tracking"),void Object(r.stopTracking)()):(o.State.socketStatus="reconnect",p%3==2&&(o.State.serverOffset++,g=!0),void setTimeout(w,500))}function I({data:e}){if(e&&"string"==typeof e&&e.length)switch(e=e.split(h),Object(i.notify)("socket server response: "+e.join("·")),e[0]){case"7":e.length>2&&!isNaN(e[2])&&+e[2]?Object(r.stopTracking)(!0):Object(r.stopTracking)()}}function P(e){Object(i.notify)("warn","socket error",e),_()}function x(){if(!l||l.readyState!==WebSocket.OPEN||0===b.length)return;let e=performance.now();null===y&&(y=e),e-y>50?setTimeout((function(){y=null,x()}),1):(M(b.shift()),x())}function M(e){o.State.debug||o.State.nativeCompressionSupported||E(e);try{l.send(e.join(h)+h+m),O=0}catch(t){if(O++,O>1)return;b.unshift(e),_("WebSocket Error (Socket Send Exception); Exception: "+t)}}function _(e="Websocket Error"){clearTimeout(S),v||(Object(i.sendStatsRequest)({type:"error",msg:e,line:"0:0",script_url:"mpathy.js"}),v=!0)}},function(e,t,n){"use strict";n.r(t),n.d(t,"applyMatcher",(function(){return a})),n.d(t,"pagename",(function(){return c})),n.d(t,"url",(function(){return s})),n.d(t,"conditions",(function(){return u})),n.d(t,"visible",(function(){return l})),n.d(t,"exists",(function(){return d})),n.d(t,"contains",(function(){return f})),n.d(t,"all",(function(){return p})),n.d(t,"any",(function(){return g})),n.d(t,"not",(function(){return m}));var i=n(0),o=n(1),r=n(13);function a(e){return"function"==typeof e?e():!!e}function c(e){return()=>Object(o.matchString)(e,i.State.pagename)}function s(e){return()=>e instanceof RegExp?Object(r.a)({type:"url",comparator:"regexp",value:e}):Object(r.a)({type:"url",comparator:"exact",value:e})}function u(e,t){if(!t.length)return()=>!0;return(e?p:g)(t.map(e=>()=>Object(r.a)(e)))}function l(e){return()=>Object(o.isVisible)(e)}function d(e){return()=>Object(o.resolveNodes)(e).length>0}function f(e,t){return()=>Object(o.resolveNodes)(e).some(e=>Object(o.matchString)(t,e.textContent))}function p(e){return()=>e.every(a)}function g(e){return()=>e.some(a)}function m(e){return()=>!a(e)}},function(e,t,n){"use strict";n.r(t),n.d(t,"startFrameBridge",(function(){return o})),n.d(t,"subscribeFrameBridge",(function(){return r})),n.d(t,"unsubscribeFrameBridge",(function(){return a})),n.d(t,"emitFrameBridge",(function(){return c}));let i=[];function o(){window.addEventListener("message",u)}function r(e,t){return i.push({event:e,callback:t}),()=>a(e,t)}function a(e,t){let n=i.find(n=>n.event===e&&n.callback===t);~n&&i.splice(n,1)}function c(e,t={},n=null){let i={mptEvent:e,payload:t};"function"==typeof n&&(n=n()),null===n?parent===window?Array.from(document.querySelectorAll("iframe")).forEach(e=>{e.contentWindow&&s(e.contentWindow,i)}):s(parent.window,i):s(n,i)}function s(e,t){try{e&&e.postMessage(t,"*")}catch(t){window.console&&window.console.error("error while sending post message",t,e)}}function u(e){let t=e.data;t instanceof Object&&t.hasOwnProperty("mptEvent")&&i.forEach(n=>{n.event===t.mptEvent&&n.callback(t.payload,e)})}},function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return y}));var i=n(1),o=n(3),r=n(0),a=n(7);let c=!1,s=location.href,u=Object(i.getTimestamp)(),l=null,d=500,f=10,p=2e3,g=1e4,m=500;function h(){c||(c=!0,l=setInterval(O,d),function(){let e=!1;window.addEventListener("pagehide",()=>{e||window.addEventListener("pageshow",t=>{(t.persisted||window.performance&&2===window.performance.navigation.type)&&("rolling"===r.Config.bufferRecording?Object(a.c)(!1):Object(o.checkPI)({force:!0})),e=!0})})}())}function b(){c&&(clearInterval(l),c=!1)}function y(e){["mousemove","scroll"].includes(e.type)?v(e):S(e)}function O(){let e=location.href;s!==location.href&&S({type:"custom-url"}),s=e}const S=Object(i.debounce)(w,f),v=Object(i.throttle)(w,p);function w(e){if(!e||!e.type)return void Object(i.notify)("warn","Eventhandler called without event-object");if("popstate"==e.type&&!e.state)return;let t=Object(i.getTimestamp)(),n=t-u;u=t,n>g?Object(o.checkPI)({force:!1}):Object(o.checkPI)({delay:m})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(1),o=n(0);function r(e){return"object"==typeof e&&("url"===e.type?function(e,t){let n=location.pathname,o=n+location.search,r=o+location.hash,c=[n,o,r];"regexp"!==e&&"mismatch_regexp"!==e&&(t=(t||"").replace(/^(https?:)?\/\//,""));let s=/^www\./.test(t),u=/^www\./.test(location.host);s&&!u&&(c.push("www."+location.host+n),c.push("www."+location.host+o),c.push("www."+location.host+r));if(!s&&u){let e=location.host.replace(/^www\./,"");c.push(e+n),c.push(e+o),c.push(e+r)}if(c.push(location.host+n),c.push(location.host+o),c.push(location.host+r),c=Object(i.arrayUniq)(c),["is_not_exactly","mismatch_regexp","contains_not","does_not_exist","not_visible"].includes(e))return c.every(n=>a(e,t,n));return c.some(n=>a(e,t,n))}(e.comparator,e.value):"pagename"===e.type?(t=e.comparator,n=e.value,a(t,n,o.State.pagename)):"selector"===e.type?function(e,t,n){if("visible"===t)return Object(i.isVisible)(e);if("not_visible"===t)return!Object(i.isVisible)(e);let o=Object(i.resolveNodes)(e);if("exists"===t)return o.length>0;if("does_not_exist"===t)return 0===o.length;return o.some(e=>a(t,n,e.textContent))}(e.selector,e.comparator,e.value):"useragent"!==e.type||function(e,t){if("regexp"===e){return new RegExp(t).test(navigator.userAgent)}if("mismatch_regexp"===e){return!new RegExp(t).test(navigator.userAgent)}if("contains"===e)return navigator.userAgent.includes(t);if("contains_not"===e)return!navigator.userAgent.includes(t);if("exact"===e)return navigator.userAgent===t;if("is_not_exactly"===e)return navigator.userAgent!==t}(e.comparator,e.value));var t,n}function a(e,t,n){if("regexp"===e){return new RegExp(t).test(n)}if("contains"===e)return n.includes(t);if("start_with"===e)return n.startsWith(t);if("exact"===e)return n===t;if("mismatch_regexp"===e){return!new RegExp(t).test(n)}return"contains_not"===e?!n.includes(t):"is_not_exactly"===e?n!==t:void 0}},function(e,t,n){"use strict";n.r(t),n.d(t,"yesno",(function(){return r})),n.d(t,"count",(function(){return a})),n.d(t,"extractNumber",(function(){return c})),n.d(t,"extractText",(function(){return s})),n.d(t,"breakpoint",(function(){return u})),n.d(t,"multiple",(function(){return l}));var i=n(0),o=n(10);function r(e,t,n){return function(){return(e instanceof Function?e():e)?t||i.Config.propertyYesValue:n||i.Config.propertyNoValue}}function a(e,t=0){return function(){return document.querySelectorAll(e).length+t}}function c(e,t=null,n="."){return function(){t=null===t?t:Number(t);let i=document.querySelector(e);if(!i)return t;let o=i.textContent;return n&&"."!==n&&(o=o.replace(n,".")),o=Number(o.replace(/[^0-9.]+/g,"")),Number.isNaN(o)?t:o}}function s(e,t="",n){return function(){let i=document.querySelector(e),o=i?i.textContent:"";if(o&&n instanceof RegExp){let e=n.exec(o);o=Array.isArray(e)?e.length>1?e.slice(1).join(""):e[0]:""}return o||t}}function u(e){return function(){let t=window.innerWidth,n=e.find((function(e){return!(void 0!==e.min&&t<e.min)&&!(void 0!==e.max&&t>e.max)}));return n&&n.name||null}}function l(e,t=""){return function(){let n=e.find(e=>("string"!=typeof e.selector||Array.isArray(e.conditions)||(e.conditions=[{type:"selector",selector:e.selector,comparator:"exists"}],e.matchAll=!0),Object(o.conditions)(e.matchAll,e.conditions)()));return n&&n.value||t}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return g}));var i=n(0),o=n(3),r=n(6);let a;function c(){let{opinionlabEnabled:e,foreseeEnabled:t}=l();if(i.Config.foreseeIntegration||i.Config.opinionlabIntegration)return e?(t&&u(),Object(r.addScope)(r.Matcher.pagename(/.*/),e=>{e.addPagenameModifier("OpinionLab Survey",r.Matcher.visible(".oo_cc_wrapper"),!0)}),Object(o.startConditionalRecording)(),void window.addEventListener("OL_CC_Launch",()=>Object(o.activateSession)("opinionlab"))):t?u():void setTimeout(c,50)}function s(){return{idsite:i.Config.idsite,idpage:i.State.currentPID,idvisitor:Object(i.getVid)(),insightUrl:p(),replayUrl:g()}}function u(){(i.Config.hasForeseeTrigger||i.Config.hasForeseeFeedback)&&(Object(r.addScope)(r.Matcher.pagename(/.*/),e=>{e.addPagenameModifier("Foresee Feedback",r.Matcher.visible("#acsModalContent"),!0),e.addPagenameModifier("Foresee Invite",r.Matcher.visible("#fsrInvite"),!0)}),window.fsReady(()=>{a=window.FSR,Object(o.startConditionalRecording)(),d("onFeedbackReady",{callback(){"stopped"!==i.State.trackingStatus&&f()},checkDidFire:!0}),d("onFeedbackShown",{callback(){"stopped"!==i.State.trackingStatus&&(f(),Object(o.activateSession)())}}),d("onInviteShown",{callback(){"stopped"!==i.State.trackingStatus&&f()},checkDidFire:!0}),d("onInviteAccepted",{callback(){"stopped"!==i.State.trackingStatus&&(f(),Object(o.activateSession)())},checkDidFire:!0});let{opinionlabEnabled:e}=l();e||d("onProductsDisqualified",{callback(){Object(o.stopTracking)(!0)},checkDidFire:!0})}))}function l(){return{opinionlabEnabled:"object"==typeof window.OOo&&i.Config.opinionlabIntegration,foreseeEnabled:"function"==typeof window.fsReady&&i.Config.foreseeIntegration}}function d(e,{callback:t,checkDidFire:n=!1}={}){"object"==typeof a[e]&&(n&&a[e].didFire&&t(),a[e].subscribe(t))}function f(){"recording"===i.State.trackingStatus&&(a.CPPS.set("mpathy_idsite",i.Config.idsite),a.CPPS.set("mpathy_idpage",i.State.currentPID),a.CPPS.set("mpathy_idvisitor",Object(i.getVid)()))}function p(){return`https://cxsuite${m()}.foresee.com/mpathy/insight/site/${i.Config.idsite}/idpage/${i.State.currentPID}`}function g(){return`https://cxsuite${m()}.foresee.com/mpathy/replay/player?idsite=${i.Config.idsite}&idpage=${i.State.currentPID}`}function m(){let e=i.Config.cdnHost.match(/^(dev-|qa-|stg-)/);return e&&"-"+e[0].slice(0,-1)||""}},function(e){e.exports=JSON.parse('{"load":{"id":1,"dataOrder":["type","eventType","time"]},"connectTime":{"id":2,"dataOrder":["type","clientTime",null,"time"]},"resize":{"id":3,"dataOrder":["type","deltaWindowWidth","deltaWindowHeight","time","deltaClientWidth","deltaClientHeight","windowWidth","windowHeight","clientWidth","clientHeight"]},"scroll":{"id":4,"dataOrder":["type","deltaScrollLeft","deltaScrollTop","time"],"logLevel":false},"scaleChange":{"id":6,"dataOrder":["type","clientWidth","clientHeight","time",0,0,0,"pageXOffset","pageYOffset"]},"mousedown":{"id":7,"dataOrder":["type","buttonId","modKey","pageX","pageY","time","tagName","id","href","anticlickmap","xpath","position","dimensions","dimensionPath"]},"elementScroll":{"id":8,"dataOrder":["type","scrollLeft","scrollTop","time","nodeId","xPath"]},"mousemove":{"id":9,"dataOrder":["type","buttonId","modKey","pageX","pageY","time"],"logLevel":false},"property":{"id":10,"dataOrder":["type","name","value","time","scope","dataType","unique"],"logLevel":"log"},"keydown":{"id":11,"dataOrder":["type","keyCode","modKey","time","key"]},"orientationChange":{"id":12,"dataOrder":["type","orientation",null,"time"]},"init":{"id":13,"dataOrder":["type","revision","PID","VID","idsite","starttime","url","viewport","res","scrollHeight","referer","flashVer","enginePolls","ua","domloadTime","scrollWidth","locale","clientWidth","pagename","scrollTop","versions","debugMessages","virtualPi","outerViewport","availableViewport","isTouch","extendedProperties","trackingPersistence"]},"mutation":{"id":14,"dataOrder":["type","data","mutationId","time"],"logLevel":false},"snapshot":{"id":15,"dataOrder":["type","0","snapshot","time"],"logLevel":false},"reconnect":{"id":16,"dataOrder":["type","PID","0","time"]},"ping":{"id":17,"dataOrder":["type"],"logLevel":false},"blur":{"id":18,"dataOrder":["type","fieldValue",null,"time"]},"focus":{"id":19,"dataOrder":["type","fieldId","fieldName","time","formId","fieldValue","fieldMptId","formName","formMptId","fieldType","tagName","XPath"]},"pagehide":{"id":21,"dataOrder":["type",null,null,"time"]},"areaVisibility":{"id":27,"dataOrder":["type","firstArea","countAreas","time"]},"change":{"id":30,"dataOrder":["type","fieldId","fieldName","time","formId","fieldValue","fieldMptId","formName","formMptId","tagName"]},"touchstart":{"id":32,"dataOrder":["type","fingerId","screenX","time","screenY","pageX","pageY","clientX","clientY","force","angle","radiusX","radiusY","tagName","id","href","anticlickmap","xpath"]},"touchmove":{"id":33,"dataOrder":["type","fingerId","screenX","time","screenY","pageX","pageY","clientX","clientY","force","angle","radiusX","radiusY"],"logLevel":false},"touchend":{"id":34,"dataOrder":["type","fingerId","screenX","time","screenY","pageX","pageY","clientX","clientY"]},"touchcancel":{"id":35,"dataOrder":["type","fingerId","screenX","time","screenY","pageX","pageY","clientX","clientY"]},"gesturestart":{"id":36,"dataOrder":["type","scale","rotation","time","tagName","nodeId"]},"gesturechange":{"id":37,"dataOrder":["type","scale","rotation","time"]},"gestureend":{"id":38,"dataOrder":["type","scale","rotation","time"]},"scrollHeight":{"id":40,"dataOrder":["type","scrollHeight","time"]},"activateSession":{"id":43,"dataOrder":["type","time","recordingType"]}}')}]);